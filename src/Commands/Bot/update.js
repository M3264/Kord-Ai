const a0_0x557863=a0_0x3e8c;(function(_0x47988f,_0x14d0b1){const _0x32370b=a0_0x3e8c,_0xb871ec=_0x47988f();while(!![]){try{const _0x8895cd=-parseInt(_0x32370b(0x239))/0x1+-parseInt(_0x32370b(0x222))/0x2+-parseInt(_0x32370b(0x19e))/0x3+parseInt(_0x32370b(0x21d))/0x4+parseInt(_0x32370b(0x1e5))/0x5*(-parseInt(_0x32370b(0x1b3))/0x6)+parseInt(_0x32370b(0x1c0))/0x7*(parseInt(_0x32370b(0x1e2))/0x8)+parseInt(_0x32370b(0x1f0))/0x9;if(_0x8895cd===_0x14d0b1)break;else _0xb871ec['push'](_0xb871ec['shift']());}catch(_0x1c822c){_0xb871ec['push'](_0xb871ec['shift']());}}}(a0_0x3a0e,0x61760));const axios=require(a0_0x557863(0x1f8)),crypto=require('crypto'),fs=require('fs')[a0_0x557863(0x21b)],path=require(a0_0x557863(0x220)),AdmZip=require(a0_0x557863(0x225)),{spawn}=require(a0_0x557863(0x235)),fetch=(..._0xb5b85f)=>import(a0_0x557863(0x1f5))[a0_0x557863(0x230)](({default:_0x310bd8})=>_0x310bd8(..._0xb5b85f)),config={'github':{'owner':a0_0x557863(0x1af),'repo':'Kord-Ai','branch':'master','tokenParts':[a0_0x557863(0x1d1),'1VYrHoKCu',a0_0x557863(0x1b1),a0_0x557863(0x19f),a0_0x557863(0x1c9)]},'paths':{'root':path[a0_0x557863(0x1ce)](__dirname,'..','..','..'),'temp':path[a0_0x557863(0x1ee)](path[a0_0x557863(0x1ce)](__dirname,'..','..','..'),a0_0x557863(0x19a)),'zip':path['join'](path[a0_0x557863(0x1ce)](__dirname,'..','..','..'),a0_0x557863(0x1e1))},'protected':[a0_0x557863(0x209),a0_0x557863(0x199),a0_0x557863(0x1bf),'.env',a0_0x557863(0x1c1),path[a0_0x557863(0x1ee)]('..','..',a0_0x557863(0x1c1)),a0_0x557863(0x202)],'versionFile':path[a0_0x557863(0x1ee)](path[a0_0x557863(0x1ce)](__dirname,'..','..','..'),a0_0x557863(0x1db))};function validateTokenConfig(){const _0x2df38b=a0_0x557863;if(!config[_0x2df38b(0x1d0)][_0x2df38b(0x210)]||!config[_0x2df38b(0x1d0)][_0x2df38b(0x210)]['startsWith'](_0x2df38b(0x219)))throw new Error(_0x2df38b(0x1fe));}function getGithubToken(){const _0x1af68a=a0_0x557863;return config[_0x1af68a(0x1d0)][_0x1af68a(0x218)][_0x1af68a(0x1ee)]('');}function a0_0x3e8c(_0x298bec,_0x2e845e){const _0x3a0e2a=a0_0x3a0e();return a0_0x3e8c=function(_0x3e8cc4,_0x91fe23){_0x3e8cc4=_0x3e8cc4-0x191;let _0xe6ef4a=_0x3a0e2a[_0x3e8cc4];return _0xe6ef4a;},a0_0x3e8c(_0x298bec,_0x2e845e);}const githubFetchOptions={'headers':{'Authorization':a0_0x557863(0x1bd)+getGithubToken(),'Accept':a0_0x557863(0x1f1),'User-Agent':a0_0x557863(0x1f2)}};async function githubFetch(_0x1ff9d1,_0x817972={}){const _0x3b1a71=a0_0x557863;try{const _0x214b4a=await fetch(_0x1ff9d1,{'headers':{'Authorization':'Bearer\x20'+getGithubToken(),'Accept':_0x3b1a71(0x1f1),'User-Agent':'KordAi'},..._0x817972});if(!_0x214b4a['ok'])throw new Error(_0x3b1a71(0x22a)+_0x214b4a[_0x3b1a71(0x1fc)]+'\x20'+_0x214b4a[_0x3b1a71(0x224)]);return _0x214b4a;}catch(_0x25a433){console[_0x3b1a71(0x1a2)](_0x3b1a71(0x1f7)+_0x1ff9d1,_0x25a433);throw _0x25a433;}}function isProtectedPath(_0x10399e){const _0x12ba18=a0_0x557863,_0x55d640=path[_0x12ba18(0x19b)](_0x10399e)[_0x12ba18(0x1b4)](/\\/g,'/');return config['protected'][_0x12ba18(0x1ac)](_0x39db3b=>{const _0x2f6b78=_0x12ba18,_0x31dbb2=path[_0x2f6b78(0x19b)](_0x39db3b)[_0x2f6b78(0x1b4)](/\\/g,'/');return _0x55d640===_0x31dbb2||_0x55d640[_0x2f6b78(0x1d8)](_0x31dbb2+'/')||_0x55d640[_0x2f6b78(0x21e)]('/'+_0x31dbb2+'/');});}async function calculateDirectoryHash(_0x50826){const _0x33077d=a0_0x557863,_0x560cb5=new Map();async function _0x4a130c(_0x51f918){const _0x1e1454=a0_0x3e8c,_0x46dcb3=await fs[_0x1e1454(0x1a8)](_0x51f918,{'withFileTypes':!![]});for(const _0x3c7800 of _0x46dcb3){const _0x5983c4=path[_0x1e1454(0x1ee)](_0x51f918,_0x3c7800[_0x1e1454(0x1d4)]),_0x52df84=path[_0x1e1454(0x1c7)](_0x50826,_0x5983c4);if(isProtectedPath(_0x52df84))continue;if(_0x3c7800[_0x1e1454(0x1e0)]())await _0x4a130c(_0x5983c4);else{const _0x28e8ca=await fs[_0x1e1454(0x206)](_0x5983c4),_0x49e46e=crypto[_0x1e1454(0x191)]('sha256')[_0x1e1454(0x1f3)](_0x28e8ca)[_0x1e1454(0x1c3)](_0x1e1454(0x23b));_0x560cb5[_0x1e1454(0x1b7)](_0x52df84,_0x49e46e);}}}await _0x4a130c(_0x50826);const _0x49d316=Array[_0x33077d(0x1d2)](_0x560cb5[_0x33077d(0x1a1)]())[_0x33077d(0x1ff)](([_0x4c86b1],[_0x10c704])=>_0x4c86b1['localeCompare'](_0x10c704))[_0x33077d(0x1e7)](([_0x2e4562,_0x1bc5ac])=>_0x2e4562+':'+_0x1bc5ac)['join']('\x0a');return crypto[_0x33077d(0x191)]('sha256')[_0x33077d(0x1f3)](_0x49d316)[_0x33077d(0x1c3)](_0x33077d(0x23b));}async function getPreviousCommit(){const _0xa666b4=a0_0x557863;try{const _0x801c0a=await githubFetch(_0xa666b4(0x20f)+config[_0xa666b4(0x1d0)][_0xa666b4(0x1dc)]+'/'+config[_0xa666b4(0x1d0)]['repo']+_0xa666b4(0x22e)),_0x3e87db=await _0x801c0a[_0xa666b4(0x21a)]();return _0x3e87db[_0xa666b4(0x1a0)]>0x1?_0x3e87db[0x1][_0xa666b4(0x200)]:_0x3e87db[0x0][_0xa666b4(0x200)];}catch(_0x42fbf4){console[_0xa666b4(0x1a2)](_0xa666b4(0x1c2),_0x42fbf4);throw _0x42fbf4;}}async function getCurrentState(){const _0x38a43f=a0_0x557863;try{try{const _0x5bc084=await fs['readFile'](config[_0x38a43f(0x1ae)],'utf-8');return{'hash':_0x5bc084[_0x38a43f(0x1da)](),'storedVersion':_0x5bc084[_0x38a43f(0x1da)]()};}catch(_0x4273af){const _0x9a0309=await getPreviousCommit();return await fs[_0x38a43f(0x1ab)](config[_0x38a43f(0x1ae)],_0x9a0309),{'hash':_0x9a0309,'storedVersion':_0x9a0309};}}catch(_0x35d191){console[_0x38a43f(0x1a2)](_0x38a43f(0x1f9),_0x35d191);throw _0x35d191;}}async function getLatestCommit(){const _0x25d06a=a0_0x557863;try{const _0x18f182=await githubFetch(_0x25d06a(0x20f)+config[_0x25d06a(0x1d0)]['owner']+'/'+config['github'][_0x25d06a(0x201)]+'/commits/'+config[_0x25d06a(0x1d0)][_0x25d06a(0x21f)]),_0x2a678f=await _0x18f182[_0x25d06a(0x21a)]();return{'hash':_0x2a678f[_0x25d06a(0x200)],'message':_0x2a678f[_0x25d06a(0x211)][_0x25d06a(0x1cb)],'date':_0x2a678f[_0x25d06a(0x211)]['author']['date']};}catch(_0x3c4522){console['error'](_0x25d06a(0x1d6),_0x3c4522);throw _0x3c4522;}}async function getChangedFiles(_0x1bf179,_0x2191c2){const _0x3aef70=a0_0x557863;try{if(!_0x1bf179||!_0x2191c2)throw new Error(_0x3aef70(0x238));const _0x1fd465=_0x3aef70(0x20f)+config[_0x3aef70(0x1d0)][_0x3aef70(0x1dc)]+'/'+config[_0x3aef70(0x1d0)][_0x3aef70(0x201)]+_0x3aef70(0x20a)+_0x1bf179+_0x3aef70(0x1ea)+_0x2191c2,_0x5969f2=await githubFetch(_0x1fd465),_0x49be0c=await _0x5969f2[_0x3aef70(0x21a)]();if(!_0x49be0c[_0x3aef70(0x23c)])throw new Error(_0x3aef70(0x1de));if(_0x49be0c[_0x3aef70(0x1e6)]>0x0&&_0x49be0c[_0x3aef70(0x23c)]['length']===0x0)return console[_0x3aef70(0x23a)]('Repository\x20is\x20'+_0x49be0c[_0x3aef70(0x1e6)]+_0x3aef70(0x1cd)),[{'filename':_0x3aef70(0x1ba),'status':'modified'}];return _0x49be0c[_0x3aef70(0x23c)];}catch(_0x1f5c9c){console[_0x3aef70(0x1a2)](_0x3aef70(0x207),_0x1f5c9c);throw _0x1f5c9c;}}async function ensureDir(_0x592685){try{await fs['access'](_0x592685);}catch{await fs['mkdir'](_0x592685,{'recursive':!![]});}}async function removeDir(_0x5f3825){const _0x11ea45=a0_0x557863;if(isProtectedPath(_0x5f3825)){console['log'](_0x11ea45(0x1d9)+_0x5f3825);return;}try{await fs['rm'](_0x5f3825,{'recursive':!![],'force':!![]});}catch(_0x561138){console[_0x11ea45(0x23a)](_0x11ea45(0x1aa)+_0x5f3825+':\x20'+_0x561138['message']);}}async function downloadCommit(_0x1c0b83){const _0x5d456f=a0_0x557863;try{const _0x5f3916='https://api.github.com/repos/'+config['github'][_0x5d456f(0x1dc)]+'/'+config[_0x5d456f(0x1d0)][_0x5d456f(0x201)]+_0x5d456f(0x208)+_0x1c0b83,_0xdb458=await githubFetch(_0x5f3916),_0x53a6df=await _0xdb458[_0x5d456f(0x1a5)]();await fs[_0x5d456f(0x1ab)](config['paths']['zip'],Buffer[_0x5d456f(0x1d2)](_0x53a6df));const _0x534eb9=new AdmZip(config[_0x5d456f(0x1ef)]['zip']);return await new Promise((_0x3284ba,_0x2d66df)=>{const _0x1d6248=_0x5d456f;_0x534eb9[_0x1d6248(0x1ec)](config[_0x1d6248(0x1ef)][_0x1d6248(0x1fd)],!![],_0x505d1b=>{const _0x2b0291=_0x1d6248;if(_0x505d1b)_0x2d66df(new Error(_0x2b0291(0x23d)+_0x505d1b['message']));else _0x3284ba();});}),await fs[_0x5d456f(0x1ab)](config[_0x5d456f(0x1ae)],_0x1c0b83),!![];}catch(_0x23404b){console[_0x5d456f(0x1a2)](_0x5d456f(0x1c5),_0x23404b);throw new Error('Download\x20failed:\x20'+_0x23404b[_0x5d456f(0x1cb)]);}}async function mapDirectory(_0x5427ef,_0x5d7662=_0x5427ef){const _0x13f047=new Map();async function _0xfad84b(_0x20ea41){const _0x451209=a0_0x3e8c,_0x41ccf1=await fs[_0x451209(0x1a8)](_0x20ea41,{'withFileTypes':!![]});for(const _0x54943a of _0x41ccf1){const _0x5d8de0=path[_0x451209(0x1ee)](_0x20ea41,_0x54943a[_0x451209(0x1d4)]),_0x5cbb29=path[_0x451209(0x1c7)](_0x5d7662,_0x5d8de0);if(_0x54943a[_0x451209(0x1e0)]())!isProtectedPath(_0x5cbb29)&&await _0xfad84b(_0x5d8de0);else{if(!isProtectedPath(_0x5cbb29)){const _0x497a4c=await fs['stat'](_0x5d8de0);_0x13f047['set'](_0x5cbb29,{'path':_0x5d8de0,'stats':_0x497a4c,'type':path[_0x451209(0x22f)](_0x54943a[_0x451209(0x1d4)])['toLowerCase']()});}}}}return await _0xfad84b(_0x5427ef),_0x13f047;}async function enhancedFileSync(_0x45962a,_0x5a0f23){const _0x42ed24=a0_0x557863;try{const _0x1a5df6=await mapDirectory(_0x45962a),_0x57d3e6=await mapDirectory(_0x5a0f23),_0x234bc5=[],_0x5d84e5=[];for(const [_0x238500,_0x31e024]of _0x1a5df6){if(isProtectedPath(_0x238500))continue;const _0x5da1e1=path['join'](_0x5a0f23,_0x238500);try{await ensureDir(path['dirname'](_0x5da1e1)),await fs[_0x42ed24(0x215)](_0x31e024['path'],_0x5da1e1),_0x234bc5[_0x42ed24(0x1cf)](_0x238500);}catch(_0x4fad76){console[_0x42ed24(0x1a2)](_0x42ed24(0x1dd)+_0x238500+':',_0x4fad76),_0x5d84e5[_0x42ed24(0x1cf)](_0x238500+':\x20'+_0x4fad76[_0x42ed24(0x1cb)]);}}for(const [_0x528fe9,_0x3eff4f]of _0x57d3e6){if(!_0x1a5df6[_0x42ed24(0x205)](_0x528fe9)&&!isProtectedPath(_0x528fe9))try{await fs['unlink'](_0x3eff4f[_0x42ed24(0x220)]),_0x234bc5['push'](_0x42ed24(0x214)+_0x528fe9);}catch(_0x2ee759){console[_0x42ed24(0x1a2)]('Error\x20removing\x20'+_0x528fe9+':',_0x2ee759),_0x5d84e5[_0x42ed24(0x1cf)](_0x42ed24(0x1d7)+_0x528fe9+':\x20'+_0x2ee759[_0x42ed24(0x1cb)]);}}return{'updates':_0x234bc5,'errors':_0x5d84e5};}catch(_0x168b10){return console[_0x42ed24(0x1a2)]('File\x20sync\x20error:',_0x168b10),{'updates':[],'errors':[_0x168b10[_0x42ed24(0x1cb)]]};}}async function downloadFile(_0x3bb6d8,_0x10e882){const _0x16afcf=a0_0x557863;try{const _0x5a463e=_0x16afcf(0x1fa)+config[_0x16afcf(0x1d0)][_0x16afcf(0x1dc)]+'/'+config[_0x16afcf(0x1d0)][_0x16afcf(0x201)]+'/'+_0x10e882+'/'+_0x3bb6d8,_0x197b92=await githubFetch(_0x5a463e),_0x463700=await _0x197b92['arrayBuffer'](),_0x587e2e=path['join'](config[_0x16afcf(0x1ef)][_0x16afcf(0x20d)],_0x3bb6d8);return await ensureDir(path[_0x16afcf(0x22d)](_0x587e2e)),await fs['writeFile'](_0x587e2e,Buffer[_0x16afcf(0x1d2)](_0x463700)),!![];}catch(_0x154208){return console[_0x16afcf(0x1a2)]('Error\x20downloading\x20file\x20'+_0x3bb6d8+':',_0x154208),![];}}async function updateIndividualFiles(_0x3e01b1,_0xbdc051){const _0x10653e=a0_0x557863,_0x2da302=[],_0xaba8a6=[];for(const _0x2d83f9 of _0x3e01b1){if(!isProtectedPath(_0x2d83f9[_0x10653e(0x1a7)]))try{if(_0x2d83f9[_0x10653e(0x1fc)]===_0x10653e(0x221))try{await fs['unlink'](path[_0x10653e(0x1ee)](config[_0x10653e(0x1ef)][_0x10653e(0x20d)],_0x2d83f9[_0x10653e(0x1a7)])),_0x2da302[_0x10653e(0x1cf)]('Removed:\x20'+_0x2d83f9['filename']);}catch(_0x4f2181){_0x4f2181['code']!=='ENOENT'&&_0xaba8a6['push']('Failed\x20to\x20remove\x20'+_0x2d83f9[_0x10653e(0x1a7)]+':\x20'+_0x4f2181['message']);}else{const _0x32f013=await downloadFile(_0x2d83f9['filename'],_0xbdc051);_0x32f013?_0x2da302[_0x10653e(0x1cf)]('Updated:\x20'+_0x2d83f9['filename']):_0xaba8a6[_0x10653e(0x1cf)](_0x10653e(0x1f6)+_0x2d83f9[_0x10653e(0x1a7)]);}}catch(_0x3d5d16){_0xaba8a6[_0x10653e(0x1cf)](_0x10653e(0x1ad)+_0x2d83f9[_0x10653e(0x1a7)]+':\x20'+_0x3d5d16[_0x10653e(0x1cb)]);}}return _0xaba8a6[_0x10653e(0x1a0)]===0x0&&await fs['writeFile'](config['versionFile'],_0xbdc051),{'updates':_0x2da302,'errors':_0xaba8a6};}async function cleanup(){const _0x1ddd86=a0_0x557863;try{await Promise[_0x1ddd86(0x1c8)]([removeDir(config[_0x1ddd86(0x1ef)][_0x1ddd86(0x1fd)]),fs[_0x1ddd86(0x232)](config['paths'][_0x1ddd86(0x1bb)])[_0x1ddd86(0x1e3)](()=>{})]);}catch(_0x42397a){console[_0x1ddd86(0x1a2)](_0x1ddd86(0x1eb),_0x42397a);}}function requiresRestart(_0x3d7cac){const _0x358c65=a0_0x557863,_0x4c6955=_0x3d7cac[_0x358c65(0x1e7)](_0x607386=>typeof _0x607386===_0x358c65(0x237)?_0x607386:_0x607386['filename']);if(_0x4c6955['some'](_0x4faf01=>_0x4faf01[_0x358c65(0x21e)](_0x358c65(0x194))))return!![];const _0x602b2a=_0x4c6955[_0x358c65(0x1b6)](_0x3da0ca=>!_0x3da0ca[_0x358c65(0x21e)](_0x358c65(0x1d3)));return _0x602b2a[_0x358c65(0x1a0)]>0x0;}async function getChangedFiles(_0x27093e,_0x45dd42){const _0x46bf5c=a0_0x557863;try{if(!_0x27093e||!_0x45dd42)throw new Error('Invalid\x20hash\x20values\x20provided');const _0x5e4590='https://api.github.com/repos/'+config[_0x46bf5c(0x1d0)][_0x46bf5c(0x1dc)]+'/'+config[_0x46bf5c(0x1d0)][_0x46bf5c(0x201)]+_0x46bf5c(0x20a)+_0x27093e+_0x46bf5c(0x1ea)+_0x45dd42,_0x567098=await githubFetch(_0x5e4590),_0x56ba4a=await _0x567098[_0x46bf5c(0x21a)]();if(!_0x56ba4a['files']&&!Array[_0x46bf5c(0x1ca)](_0x56ba4a[_0x46bf5c(0x23c)]))throw new Error(_0x46bf5c(0x1de));console['log'](_0x46bf5c(0x227)+(_0x56ba4a[_0x46bf5c(0x1b5)]||0x0)),console[_0x46bf5c(0x23a)](_0x46bf5c(0x1b2)+_0x56ba4a['files']['length']);const _0x447f5b=new Map();_0x56ba4a[_0x46bf5c(0x23c)][_0x46bf5c(0x1b9)](_0x30eb4f=>{const _0x20f167=_0x46bf5c;_0x447f5b[_0x20f167(0x1b7)](_0x30eb4f['filename'],_0x30eb4f);});const _0x36ad5c=Array['from'](_0x447f5b[_0x46bf5c(0x216)]());return console[_0x46bf5c(0x23a)]('Total\x20unique\x20files\x20to\x20update:\x20'+_0x36ad5c[_0x46bf5c(0x1a0)]),_0x36ad5c;}catch(_0x56ad61){console[_0x46bf5c(0x1a2)]('Error\x20getting\x20changed\x20files:',_0x56ad61);throw _0x56ad61;}}async function getCommitHistory(_0x1f8ee5,_0x35923b){const _0x19f2b8=a0_0x557863;try{const _0x3a429d=_0x19f2b8(0x20f)+config['github'][_0x19f2b8(0x1dc)]+'/'+config[_0x19f2b8(0x1d0)][_0x19f2b8(0x201)]+_0x19f2b8(0x20a)+_0x1f8ee5+_0x19f2b8(0x1ea)+_0x35923b,_0x263aca=await githubFetch(_0x3a429d),_0x7a22b=await _0x263aca['json']();if(!_0x7a22b[_0x19f2b8(0x1df)])throw new Error(_0x19f2b8(0x1de));return _0x7a22b[_0x19f2b8(0x1df)][_0x19f2b8(0x1e7)](_0x5084a8=>({'hash':_0x5084a8[_0x19f2b8(0x200)][_0x19f2b8(0x19c)](0x0,0x8),'message':_0x5084a8[_0x19f2b8(0x211)][_0x19f2b8(0x1cb)],'date':_0x5084a8['commit'][_0x19f2b8(0x196)]['date']}));}catch(_0x38633a){console[_0x19f2b8(0x1a2)](_0x19f2b8(0x1c4),_0x38633a);throw _0x38633a;}}function a0_0x3a0e(){const _0x4edeb1=['config.js','7vQoAYw','Session','Error\x20getting\x20previous\x20commit:','digest','Error\x20getting\x20commit\x20history:','Download\x20error:','‚úì\x20Update\x20completed\x20-\x20No\x20restart\x20needed','relative','all','Clrof','isArray','message','Bot','\x20commits\x20behind.\x20Forcing\x20full\x20update.','resolve','push','github','ghp_UlBS','from','src/Commands/','name','‚úì\x20Update\x20completed\x20successfully!\x0a\x0aFiles\x20updated:\x20','Error\x20getting\x20latest\x20commit:','Failed\x20to\x20remove\x20','startsWith','Skipping\x20protected\x20directory\x20removal:\x20','trim','.version','owner','Error\x20copying\x20','Invalid\x20response\x20format\x20from\x20GitHub\x20API','commits','isDirectory','bot-update.zip','5728888lBalnF','catch','ignore','747425UmOayy','behind_by','map','‚ö†Ô∏è\x20Update\x20completed\x20with\x20','\x20files\x20individually...','...','Cleanup\x20error:','extractAllToAsync','.\x20[','join','paths','11621916vIafum','application/vnd.github.v3+json','KordAi','update','shortHash','node-fetch','Failed\x20to\x20download:\x20','GitHub\x20API\x20request\x20failed:\x20','axios','Error\x20getting\x20current\x20state:','https://raw.githubusercontent.com/','current','status','temp','Invalid\x20GitHub\x20token\x20configuration','sort','sha','repo','package-lock.json','\x0a\x0aCommit\x20History:\x0a','‚úÖ\x20Update\x20completed\x20successfully!','has','readFile','Error\x20getting\x20changed\x20files:','/zipball/','node_modules','/compare/','*Update\x20found!*\x0a\x0aCurrent:\x20','UPDATING\x20BOT,\x20PLEASE\x20WAIT','root','_Checking\x20for\x20updates..._','https://api.github.com/repos/','token','commit','sendMessage','exit','Removed:\x20','copyFile','values','Update\x20error:','tokenParts','ghp_','json','promises','changedFiles','136852hKYmmr','includes','branch','path','removed','1459562LezVnp','‚ùå\x20Update\x20check\x20failed:\x20','statusText','adm-zip','needsUpdate','Total\x20commits\x20between\x20versions:\x20','Update\x20check\x20failed:','\x0a\x0aUpdated\x20with\x20','GitHub\x20API\x20error:\x20','unref','Checking\x20for\x20updates\x20at\x20startup...','dirname','/commits?per_page=2','extname','then','_*UPDATING...*_\x0a\x0a\x20please\x20wait...','unlink','\x0a\x0aStarting\x20update...','Validating\x20GitHub\x20token\x20configuration...','child_process','\x0aCommit\x20History:','string','Invalid\x20hash\x20values\x20provided','131622OoHgHX','log','hex','files','Extraction\x20failed:\x20','createHash','date','\x0aLatest\x20commit:\x20','/Plugin/','index.js','author','\x20commits','storedVersion','Config.js','temp_update','normalize','substring','\x0aLatest:\x20','100860EGNWjS','WDTMKE571','length','entries','error','latest','remoteJid','arrayBuffer','hash','filename','readdir','üîÑ\x20Core\x20files\x20updated\x20-\x20RESTARTING\x20bot...','Note:\x20Could\x20not\x20remove\x20','writeFile','some','Error\x20processing\x20','versionFile','M3264','key','Z7VCNWugV','Total\x20files\x20changed:\x20','30bbGphI','replace','total_commits','filter','set','exports','forEach','FULL_UPDATE_REQUIRED','zip','commitHistory','Bearer\x20','Updates\x20the\x20bot\x20files\x20from\x20the\x20latest\x20GitHub\x20commit.'];a0_0x3a0e=function(){return _0x4edeb1;};return a0_0x3a0e();}async function checkForUpdates(){const _0x565ad4=a0_0x557863;try{const _0x4e4348=await getCurrentState(),_0x1e4906=await getLatestCommit();let _0x365fa2=[],_0x54a193=[];return _0x4e4348[_0x565ad4(0x1a6)]!==_0x1e4906[_0x565ad4(0x1a6)]&&(_0x365fa2=await getChangedFiles(_0x4e4348[_0x565ad4(0x1a6)],_0x1e4906[_0x565ad4(0x1a6)]),_0x54a193=await getCommitHistory(_0x4e4348[_0x565ad4(0x1a6)],_0x1e4906[_0x565ad4(0x1a6)])),{'needsUpdate':_0x4e4348[_0x565ad4(0x1a6)]!==_0x1e4906[_0x565ad4(0x1a6)],'useZip':![],'changedFiles':_0x365fa2,'commitHistory':_0x54a193,'current':{'hash':_0x4e4348['hash'][_0x565ad4(0x19c)](0x0,0x8),'stored':_0x4e4348[_0x565ad4(0x198)]['substring'](0x0,0x8)},'latest':{'hash':_0x1e4906[_0x565ad4(0x1a6)],'shortHash':_0x1e4906[_0x565ad4(0x1a6)][_0x565ad4(0x19c)](0x0,0x8),'message':_0x1e4906['message'],'date':_0x1e4906[_0x565ad4(0x192)]}};}catch(_0x5aa90c){console[_0x565ad4(0x1a2)](_0x565ad4(0x228),_0x5aa90c);throw _0x5aa90c;}}async function performUpdate(_0x14e2e5){const _0x26fae8=a0_0x557863;try{console['log']('Updating\x20'+_0x14e2e5[_0x26fae8(0x21c)][_0x26fae8(0x1a0)]+_0x26fae8(0x1e9)),console['log'](_0x26fae8(0x236)),_0x14e2e5[_0x26fae8(0x1bc)][_0x26fae8(0x1b9)]((_0x331f3e,_0x233dac)=>{const _0x263ab9=_0x26fae8;console[_0x263ab9(0x23a)]('\x0a'+(_0x233dac+0x1)+_0x263ab9(0x1ed)+_0x331f3e[_0x263ab9(0x1a6)]+']\x20'+_0x331f3e[_0x263ab9(0x1cb)]);});const _0x5b4b4e=await updateIndividualFiles(_0x14e2e5[_0x26fae8(0x21c)],_0x14e2e5[_0x26fae8(0x1a3)][_0x26fae8(0x1a6)]);return await cleanup(),_0x5b4b4e;}catch(_0x445e41){console['error']('Update\x20process\x20failed:',_0x445e41),await cleanup();throw _0x445e41;}}async function checkAndAutoUpdate(){const _0x5ab2b0=a0_0x557863;try{console['log'](_0x5ab2b0(0x234)),console['log'](_0x5ab2b0(0x22c));const _0x25d1a9=await checkForUpdates();console[_0x5ab2b0(0x23a)]('Current:\x20'+_0x25d1a9['current'][_0x5ab2b0(0x1a6)]+'\x20|\x20Latest:\x20'+_0x25d1a9['latest'][_0x5ab2b0(0x1f4)]);if(_0x25d1a9[_0x5ab2b0(0x226)]){console[_0x5ab2b0(0x23a)]('üîÑ\x20New\x20updates\x20found!\x20Starting\x20auto-update...'),console[_0x5ab2b0(0x23a)](_0x5ab2b0(0x236)),_0x25d1a9[_0x5ab2b0(0x1bc)]['forEach']((_0xedfe2b,_0x41d48a)=>{const _0x49fedb=_0x5ab2b0;console[_0x49fedb(0x23a)]('\x0a'+(_0x41d48a+0x1)+_0x49fedb(0x1ed)+_0xedfe2b[_0x49fedb(0x1a6)]+']\x20'+_0xedfe2b[_0x49fedb(0x1cb)]);}),console[_0x5ab2b0(0x23a)](_0x5ab2b0(0x20c));const {updates:updates=[],errors:errors=[]}=await performUpdate(_0x25d1a9);if(errors[_0x5ab2b0(0x1a0)]>0x0)return console[_0x5ab2b0(0x23a)]('‚ö†Ô∏è\x20Update\x20completed\x20with\x20some\x20errors:',errors),![];console[_0x5ab2b0(0x23a)](_0x5ab2b0(0x204));if(updates[_0x5ab2b0(0x1a0)]>0x0&&requiresRestart(updates)){console[_0x5ab2b0(0x23a)](_0x5ab2b0(0x1a9));const _0x55da04=spawn('node',[_0x5ab2b0(0x195)],{'detached':!![],'stdio':'ignore','cwd':config['paths'][_0x5ab2b0(0x20d)]});_0x55da04[_0x5ab2b0(0x22b)](),process['exit'](0x0);}else console[_0x5ab2b0(0x23a)]('‚úÖ\x20Update\x20completed\x20-\x20No\x20restart\x20required');return!![];}else return console[_0x5ab2b0(0x23a)]('‚úì\x20Bot\x20is\x20up\x20to\x20date'),!![];}catch(_0x143326){return console[_0x5ab2b0(0x1a2)]('Auto-update\x20error:',_0x143326),await cleanup(),![];}}async function updateBot(_0x39f3fd,_0x38a512){const _0x45e7cb=a0_0x557863;try{await _0x39f3fd['sendMessage'](_0x38a512['key'][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x20e)},{'quoted':_0x38a512});const _0x58c051=await checkForUpdates();if(_0x58c051['needsUpdate']){const _0x3bafdd=_0x58c051[_0x45e7cb(0x1bc)][_0x45e7cb(0x1e7)]((_0xe9c94d,_0x3ff2d9)=>_0x3ff2d9+0x1+_0x45e7cb(0x1ed)+_0xe9c94d[_0x45e7cb(0x1a6)]+']\x0a'+_0xe9c94d[_0x45e7cb(0x1cb)])[_0x45e7cb(0x1ee)]('\x0a\x0a');await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x20b)+_0x58c051[_0x45e7cb(0x1fb)]['hash']+_0x45e7cb(0x19d)+_0x58c051[_0x45e7cb(0x1a3)][_0x45e7cb(0x1f4)]+_0x45e7cb(0x203)+_0x3bafdd+_0x45e7cb(0x233)},{'quoted':_0x38a512}),await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x231)},{'quoted':_0x38a512});const {updates:updates=[],errors:errors=[]}=await performUpdate(_0x58c051);if(errors[_0x45e7cb(0x1a0)]>0x0){await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512['key'][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x1e8)+errors[_0x45e7cb(0x1a0)]+'\x20errors:\x0a'+errors[_0x45e7cb(0x1ee)]('\x0a')},{'quoted':_0x38a512});return;}const _0x2be740=_0x45e7cb(0x1d5)+updates[_0x45e7cb(0x1a0)]+_0x45e7cb(0x229)+_0x58c051[_0x45e7cb(0x1bc)][_0x45e7cb(0x1a0)]+_0x45e7cb(0x197);await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':_0x2be740},{'quoted':_0x38a512});if(updates[_0x45e7cb(0x1a0)]>0x0&&requiresRestart(updates)){await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)]['remoteJid'],{'text':'üîÑ\x20Core\x20files\x20updated\x20-\x20Restart\x20needed...'},{'quoted':_0x38a512});const _0xaffec5=spawn('node',[_0x45e7cb(0x195)],{'detached':!![],'stdio':_0x45e7cb(0x1e4),'cwd':config[_0x45e7cb(0x1ef)][_0x45e7cb(0x20d)]});_0xaffec5[_0x45e7cb(0x22b)](),process[_0x45e7cb(0x213)](0x0);}else await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x1c6)},{'quoted':_0x38a512});}else await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':'‚úì\x20Bot\x20is\x20up\x20to\x20date!\x0a\x0aCurrent\x20version:\x20'+_0x58c051[_0x45e7cb(0x1fb)][_0x45e7cb(0x1a6)]+_0x45e7cb(0x193)+_0x58c051[_0x45e7cb(0x1a3)][_0x45e7cb(0x1cb)]},{'quoted':_0x38a512});}catch(_0x324ff2){console[_0x45e7cb(0x1a2)](_0x45e7cb(0x217),_0x324ff2),await _0x39f3fd[_0x45e7cb(0x212)](_0x38a512[_0x45e7cb(0x1b0)][_0x45e7cb(0x1a4)],{'text':_0x45e7cb(0x223)+_0x324ff2[_0x45e7cb(0x1cb)]},{'quoted':_0x38a512}),await cleanup();}}module[a0_0x557863(0x1b8)]={'usage':[a0_0x557863(0x1f3)],'desc':a0_0x557863(0x1be),'commandType':a0_0x557863(0x1cc),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'isOwnerOnly':!![],'emoji':'‚öôÔ∏è','execute':updateBot,'checkAndAutoUpdate':checkAndAutoUpdate};