function a0_0x213d(){const _0x1df14a=['shift','user','stringify','Invalid\x20response\x20format\x20from\x20Mistral\x20AI','1442OaQSdL','utf8','16436kvDWHt','string','trim','\x0aAI:','composing','fromMe','@mistralai/mistralai','paused','size','7rxKwqE','delete','add','âš ï¸\x20Chatbot\x20is\x20already\x20inactive\x20in\x20this\x20chat!','3289770XRKwvX','length','message','99zdWYqZ','error','Bot','push','remoteJid','extendedTextMessage','messages.upsert','âŒ\x20Sorry,\x20I\x20encountered\x20an\x20error:\x20','AA46jQW0VLsz2x7FW7sCUnBVIpBaa1qW','content','g-chatbot','path','updateConfig','sendMessage','has','text','Mistral\x20API\x20error:','âœ…\x20Chatbot\x20has\x20been\x20deactivated.','agentId','âœ…\x20Kord\x20AI\x20Chatbot\x20activated!\x20You\x20can\x20now\x20chat\x20with\x20me.','g-chatbot_config.json','writeFile','540530BbZicv','key','155049CkASds','exports','âŒ\x20Usage:\x20.chatbot\x20on/off','3386480hwsMFQ','Chat\x20With\x20Mistral\x20AI\x20Bot','Failed\x20to\x20get\x20AI\x20response:\x20','startListening','2061462fNZgyT','choices','sendPresenceUpdate','clear','45oiCMpj','ag:4151fcb9:20250104:untitled-agent:d1bde2e5','âš ï¸\x20Chatbot\x20is\x20already\x20active\x20in\x20this\x20chat!','191wJqodx','off','set','Error\x20updating\x20config:'];a0_0x213d=function(){return _0x1df14a;};return a0_0x213d();}const a0_0x245f70=a0_0x449f;(function(_0x2dc353,_0xf8d32a){const _0x34e273=a0_0x449f,_0x4a4c3a=_0x2dc353();while(!![]){try{const _0x5d2df9=parseInt(_0x34e273(0x1fb))/0x1*(-parseInt(_0x34e273(0x203))/0x2)+-parseInt(_0x34e273(0x1ed))/0x3+-parseInt(_0x34e273(0x205))/0x4*(-parseInt(_0x34e273(0x1f8))/0x5)+parseInt(_0x34e273(0x1f4))/0x6+parseInt(_0x34e273(0x1ce))/0x7*(parseInt(_0x34e273(0x1f0))/0x8)+parseInt(_0x34e273(0x1d5))/0x9*(-parseInt(_0x34e273(0x1eb))/0xa)+parseInt(_0x34e273(0x1d2))/0xb;if(_0x5d2df9===_0xf8d32a)break;else _0x4a4c3a['push'](_0x4a4c3a['shift']());}catch(_0x684604){_0x4a4c3a['push'](_0x4a4c3a['shift']());}}}(a0_0x213d,0x4ddf1));function a0_0x449f(_0x49aeeb,_0x413653){const _0x213d50=a0_0x213d();return a0_0x449f=function(_0x449f0c,_0x383627){_0x449f0c=_0x449f0c-0x1ce;let _0x5d1ad9=_0x213d50[_0x449f0c];return _0x5d1ad9;},a0_0x449f(_0x49aeeb,_0x413653);}const fs=require('fs')['promises'],path=require(a0_0x245f70(0x1e0)),{Mistral}=require(a0_0x245f70(0x20b)),emojis={'loading':'â³','success':'âœ¨','error':'âŒ'},configPath=path['join'](__dirname,'..','..','Database',a0_0x245f70(0x1e9));let messageListener=null,activeChats=new Set(),chatHistory=new Map();const mistralClient=new Mistral({'apiKey':a0_0x245f70(0x1dd)}),AGENT_CONFIG={'agentId':a0_0x245f70(0x1f9)};function sanitizeMessage(_0x4cb263){const _0x4da617=a0_0x245f70;if(typeof _0x4cb263!==_0x4da617(0x206))return'';return _0x4cb263[_0x4da617(0x207)]();}async function getAIResponse(_0x35415b,_0xdc56da){const _0x5e66b7=a0_0x245f70,_0x22b6a6=sanitizeMessage(_0x35415b);if(!_0x22b6a6)throw new Error('Empty\x20message');try{!chatHistory[_0x5e66b7(0x1e3)](_0xdc56da)&&chatHistory[_0x5e66b7(0x1fd)](_0xdc56da,[]);const _0xe9197b=chatHistory['get'](_0xdc56da),_0x2fec25='You\x27re\x20an\x20AI\x20that\x20only\x20speaks\x20in\x20Gen\x20Z\x20slang.\x20Make\x20sure\x20your\x20replies\x20are\x20funny,\x20sarcastic,\x20and\x20relatable,\x20but\x20still\x20serious\x20and\x20intelligent,\x20I\x20really\x20don\x27t\x20like\x20too\x20much\x20emojis.\x0a\x0a',_0x21e4d3=_0x2fec25+'User:\x20'+_0x22b6a6+_0x5e66b7(0x208);_0xe9197b[_0x5e66b7(0x1d8)]({'role':_0x5e66b7(0x200),'content':_0x21e4d3});while(_0xe9197b[_0x5e66b7(0x1d3)]>0x19){_0xe9197b[_0x5e66b7(0x1ff)]();}const _0x5de58c=await mistralClient['agents']['complete']({'agentId':AGENT_CONFIG[_0x5e66b7(0x1e7)],'messages':_0xe9197b});if(!_0x5de58c?.[_0x5e66b7(0x1f5)]?.[0x0]?.[_0x5e66b7(0x1d4)]?.[_0x5e66b7(0x1de)])throw new Error(_0x5e66b7(0x202));return _0xe9197b[_0x5e66b7(0x1d8)]({'role':'assistant','content':_0x5de58c[_0x5e66b7(0x1f5)][0x0][_0x5e66b7(0x1d4)][_0x5e66b7(0x1de)]}),_0x5de58c['choices'][0x0][_0x5e66b7(0x1d4)]['content'];}catch(_0x259da1){console[_0x5e66b7(0x1d6)](_0x5e66b7(0x1e5),_0x259da1),chatHistory[_0x5e66b7(0x1cf)](_0xdc56da);throw new Error(_0x5e66b7(0x1f2)+_0x259da1[_0x5e66b7(0x1d4)]);}}module[a0_0x245f70(0x1ee)]={'usage':[a0_0x245f70(0x1df)],'desc':a0_0x245f70(0x1f1),'commandType':a0_0x245f70(0x1d7),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'ðŸ¤“',async 'execute'(_0x512d7b,_0x526651,_0x586dab){const _0x316404=a0_0x245f70,_0x5794dd=_0x526651[_0x316404(0x1ec)][_0x316404(0x1d9)],_0x2720e7=_0x424616=>{return _0x512d7b['sendMessage'](_0x5794dd,{'text':_0x424616});};if(_0x586dab[0x0]==='on'){if(activeChats[_0x316404(0x1e3)](_0x5794dd))return _0x2720e7(_0x316404(0x1fa));return activeChats[_0x316404(0x1d0)](_0x5794dd),chatHistory[_0x316404(0x1fd)](_0x5794dd,[]),await this['updateConfig'](_0x5794dd,!![]),!messageListener&&this[_0x316404(0x1f3)](_0x512d7b),_0x2720e7(_0x316404(0x1e8));}else{if(_0x586dab[0x0]===_0x316404(0x1fc)){if(!activeChats[_0x316404(0x1e3)](_0x5794dd))return _0x2720e7(_0x316404(0x1d1));return activeChats['delete'](_0x5794dd),chatHistory[_0x316404(0x1cf)](_0x5794dd),await this[_0x316404(0x1e1)](_0x5794dd,![]),activeChats[_0x316404(0x20d)]===0x0&&messageListener&&(_0x512d7b['ev'][_0x316404(0x1fc)](_0x316404(0x1db),messageListener),messageListener=null),_0x2720e7(_0x316404(0x1e6));}else return _0x2720e7(_0x316404(0x1ef));}},async 'updateConfig'(_0x3753dd,_0x49f8d7){const _0x1c39d6=a0_0x245f70;try{let _0x24879e={};_0x49f8d7&&(_0x24879e[_0x3753dd]=!![]),await fs[_0x1c39d6(0x1ea)](configPath,JSON[_0x1c39d6(0x201)](_0x24879e,null,0x2));}catch(_0x48e2a7){console['error'](_0x1c39d6(0x1fe),_0x48e2a7);throw new Error('Failed\x20to\x20update\x20configuration');}},'startListening'(_0x18504c){const _0x12ea71=a0_0x245f70;messageListener=async({messages:_0x2d85a7})=>{const _0x25dd47=a0_0x449f;for(const _0x31746a of _0x2d85a7){if(!_0x31746a?.['key']?.['remoteJid']||!activeChats['has'](_0x31746a[_0x25dd47(0x1ec)][_0x25dd47(0x1d9)]))continue;const _0x3d9c95=_0x31746a[_0x25dd47(0x1ec)][_0x25dd47(0x1d9)],_0x5502d8=_0x31746a[_0x25dd47(0x1d4)]?.['conversation']||_0x31746a[_0x25dd47(0x1d4)]?.[_0x25dd47(0x1da)]?.[_0x25dd47(0x1e4)]||'';if(!_0x5502d8||_0x31746a['key'][_0x25dd47(0x20a)])continue;try{await _0x18504c['sendPresenceUpdate'](_0x25dd47(0x209),_0x3d9c95),await _0x18504c['sendMessage'](_0x3d9c95,{'react':{'key':_0x31746a[_0x25dd47(0x1ec)],'emoji':emojis['loading']}});const _0x2ef9c9=await getAIResponse(_0x5502d8,_0x3d9c95);await _0x18504c[_0x25dd47(0x1e2)](_0x3d9c95,{'react':{'key':_0x31746a[_0x25dd47(0x1ec)],'emoji':emojis['success']}}),await _0x18504c['sendMessage'](_0x3d9c95,{'text':_0x2ef9c9,'contextInfo':{'quotedMessage':_0x31746a[_0x25dd47(0x1d4)]}});}catch(_0x535f30){console['error']('Chatbot\x20error:',_0x535f30),await _0x18504c['sendMessage'](_0x3d9c95,{'react':{'key':_0x31746a[_0x25dd47(0x1ec)],'emoji':emojis[_0x25dd47(0x1d6)]}}),await _0x18504c[_0x25dd47(0x1e2)](_0x3d9c95,{'text':_0x25dd47(0x1dc)+_0x535f30[_0x25dd47(0x1d4)]});}finally{await _0x18504c[_0x25dd47(0x1f6)](_0x25dd47(0x20c),_0x3d9c95);}}},_0x18504c['ev']['on'](_0x12ea71(0x1db),messageListener);},async 'init'(_0x23bb5c){const _0x13b85b=a0_0x245f70;try{await fs[_0x13b85b(0x1ea)](configPath,'{}',_0x13b85b(0x204)),activeChats[_0x13b85b(0x1f7)](),chatHistory[_0x13b85b(0x1f7)](),messageListener&&(_0x23bb5c['ev'][_0x13b85b(0x1fc)](_0x13b85b(0x1db),messageListener),messageListener=null);}catch(_0x26542b){console[_0x13b85b(0x1d6)]('Error\x20initializing\x20chatbot:',_0x26542b);}}};