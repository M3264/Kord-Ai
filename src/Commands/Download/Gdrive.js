const a0_0x2a36a3=a0_0x2e5f;(function(_0x363b20,_0x405b19){const _0xf5efd7=a0_0x2e5f,_0x3fcb34=_0x363b20();while(!![]){try{const _0x4d7dd2=parseInt(_0xf5efd7(0xcc))/0x1*(parseInt(_0xf5efd7(0xc7))/0x2)+parseInt(_0xf5efd7(0xb0))/0x3+-parseInt(_0xf5efd7(0xa8))/0x4*(-parseInt(_0xf5efd7(0x96))/0x5)+-parseInt(_0xf5efd7(0xbf))/0x6+parseInt(_0xf5efd7(0xb5))/0x7*(parseInt(_0xf5efd7(0xc3))/0x8)+parseInt(_0xf5efd7(0xb8))/0x9*(parseInt(_0xf5efd7(0x8c))/0xa)+-parseInt(_0xf5efd7(0x9b))/0xb;if(_0x4d7dd2===_0x405b19)break;else _0x3fcb34['push'](_0x3fcb34['shift']());}catch(_0x431006){_0x3fcb34['push'](_0x3fcb34['shift']());}}}(a0_0x460c,0xf0555));const a0_0x1c6356=a0_0x5737;(function(_0x1fe3e0,_0x43805b){const _0x436bc5=a0_0x2e5f,_0x3af42e=a0_0x5737,_0x2be58d=_0x1fe3e0();while(!![]){try{const _0xabcb15=parseInt(_0x3af42e(0x17f))/0x1*(parseInt(_0x3af42e(0x16a))/0x2)+-parseInt(_0x3af42e(0x175))/0x3+-parseInt(_0x3af42e(0x153))/0x4+parseInt(_0x3af42e(0x167))/0x5+parseInt(_0x3af42e(0x17a))/0x6+-parseInt(_0x3af42e(0x156))/0x7*(-parseInt(_0x3af42e(0x172))/0x8)+-parseInt(_0x3af42e(0x16c))/0x9*(-parseInt(_0x3af42e(0x17e))/0xa);if(_0xabcb15===_0x43805b)break;else _0x2be58d['push'](_0x2be58d[_0x436bc5(0xc9)]());}catch(_0x1b6540){_0x2be58d['push'](_0x2be58d[_0x436bc5(0xc9)]());}}}(a0_0x5dc2,0x21740));const fetch=require(a0_0x1c6356(0x14d)),fs=require('fs')['promises'],fsSync=require('fs'),path=require(a0_0x1c6356(0x174)),archiver=require('archiver'),axios=require(a0_0x1c6356(0x187)),TEMP_DIR=path[a0_0x1c6356(0x180)](__dirname,a0_0x1c6356(0x155));function a0_0x5dc2(){const _0x42ae27=a0_0x2e5f,_0xfe8f4e=[_0x42ae27(0xc6),_0x42ae27(0xa6),_0x42ae27(0xc5),_0x42ae27(0xc0),_0x42ae27(0xa3),_0x42ae27(0x9e),_0x42ae27(0xcb),_0x42ae27(0x82),_0x42ae27(0x92),_0x42ae27(0xab),_0x42ae27(0x84),_0x42ae27(0x98),_0x42ae27(0xb6),_0x42ae27(0x9c),_0x42ae27(0xb2),_0x42ae27(0x9a),'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/91.0.4472.124\x20Safari/537.36',_0x42ae27(0xb9),_0x42ae27(0xaf),_0x42ae27(0xa2),_0x42ae27(0x83),_0x42ae27(0x87),'axios','Error\x20with\x20file\x20',_0x42ae27(0x89),'node-fetch',_0x42ae27(0xa7),_0x42ae27(0x91),_0x42ae27(0xc2),_0x42ae27(0x8e),'map',_0x42ae27(0xca),'ðŸ“‚\x20Found\x20',_0x42ae27(0xba),'28GWljol',_0x42ae27(0xb1),_0x42ae27(0xa0),_0x42ae27(0x99),_0x42ae27(0x86),_0x42ae27(0x9f),'split',_0x42ae27(0xa5),_0x42ae27(0xbc),_0x42ae27(0xa4),_0x42ae27(0x85),'Download\x20failed:\x20','access',_0x42ae27(0xbb),_0x42ae27(0xa1),_0x42ae27(0x8a),'message','263690HgZvYS',_0x42ae27(0xc4),_0x42ae27(0xb4),'4694WNAbGj',_0x42ae27(0x8f),_0x42ae27(0xb3),'âœ…\x20Sent:\x20',_0x42ae27(0x90),_0x42ae27(0xae),_0x42ae27(0x8b)];return a0_0x5dc2=function(){return _0xfe8f4e;},a0_0x5dc2();}module[a0_0x2a36a3(0xad)]={'usage':[a0_0x2a36a3(0x9d),a0_0x2a36a3(0xc8)],'desc':a0_0x1c6356(0x15d),'commandType':a0_0x2a36a3(0x88),'isGroupOnly':![],'isAdminOnly':![],'isPrivateOnly':![],'emoji':'â˜ï¸','execute':handleDriveCommand};async function handleDriveCommand(_0x490a60,_0x2a0a22,_0x262ce3){const _0x45f4ac=a0_0x2a36a3,_0x2a3ade=a0_0x1c6356;if(!_0x262ce3[0x0])return await replyMessage(_0x2a0a22,_0x2a3ade(0x14c));const _0x130d69=_0x262ce3[0x0];try{await replyMessage(_0x2a0a22,_0x2a3ade(0x168));if(!isValidDriveUrl(_0x130d69))return await replyMessage(_0x2a0a22,_0x45f4ac(0xa9));_0x130d69[_0x45f4ac(0x94)](_0x2a3ade(0x185))?await handleFolder(_0x130d69,_0x490a60,_0x2a0a22):await handleFile(_0x130d69,_0x490a60,_0x2a0a22);}catch(_0x22d93e){console[_0x2a3ade(0x163)]('Drive\x20Download\x20Error:',_0x22d93e),await replyMessage(_0x2a0a22,_0x2a3ade(0x186)+(_0x22d93e[_0x2a3ade(0x166)]||_0x2a3ade(0x16b)));}}async function handleFolder(_0x3f39a8,_0x4601f9,_0x5670a1){const _0x345de7=a0_0x2a36a3,_0xc7b8ac=a0_0x1c6356;try{const _0x54a60d=await getFolderFiles(_0x3f39a8);if(!_0x54a60d[_0x345de7(0x86)])throw new Error(_0xc7b8ac(0x16e));await replyMessage(_0x5670a1,_0xc7b8ac(0x154)+_0x54a60d[_0xc7b8ac(0x15a)]+_0xc7b8ac(0x16f));for(const _0x26ddc2 of _0x54a60d){try{await downloadAndSendFile(_0x26ddc2,_0x4601f9,_0x5670a1),await new Promise(_0x2e1f80=>setTimeout(_0x2e1f80,0x3e8));}catch(_0x34c9cf){console[_0xc7b8ac(0x163)](_0xc7b8ac(0x14b)+_0x26ddc2+':',_0x34c9cf);}}await replyMessage(_0x5670a1,_0xc7b8ac(0x169));}catch(_0x4629cd){throw new Error(_0xc7b8ac(0x164)+_0x4629cd[_0xc7b8ac(0x166)]);}}async function getFolderFiles(_0x16be96){const _0x4512f5=a0_0x2a36a3,_0x52d885=a0_0x1c6356;try{const _0x16439c=_0x16be96[_0x4512f5(0x85)](/folders\/([^/?]+)/)?.[0x1];if(!_0x16439c)throw new Error(_0x52d885(0x177));const _0x446448=await axios[_0x52d885(0x184)](_0x52d885(0x158)+_0x16439c,{'headers':{'User-Agent':_0x52d885(0x181)}}),_0x170700=[],_0x4ad29a=_0x446448['data'][_0x52d885(0x160)](/\/file\/d\/([^/"\s]+)/g)||[];for(const _0x424894 of _0x4ad29a){const _0x237349=_0x424894[_0x52d885(0x15c)]('/')[0x3];_0x237349&&!_0x170700[_0x4512f5(0x94)](_0x237349)&&_0x170700[_0x52d885(0x170)](_0x237349);}return _0x170700;}catch(_0x1e5480){throw new Error(_0x4512f5(0xbd)+_0x1e5480[_0x52d885(0x166)]);}}function a0_0x5737(_0x446e5d,_0x3623a1){const _0x6d879a=a0_0x5dc2();return a0_0x5737=function(_0x563725,_0x5bd3ef){_0x563725=_0x563725-0x14b;let _0x2e45be=_0x6d879a[_0x563725];return _0x2e45be;},a0_0x5737(_0x446e5d,_0x3623a1);}async function handleFile(_0x10458d,_0x3e638b,_0x5875cf){const _0x583e8e=a0_0x2a36a3,_0x53bedb=extractFileId(_0x10458d);if(!_0x53bedb)throw new Error(_0x583e8e(0x95));await downloadAndSendFile(_0x53bedb,_0x3e638b,_0x5875cf);}async function downloadAndSendFile(_0x52270d,_0x2ea853,_0x2c1051){const _0x548496=a0_0x2a36a3,_0xa7004c=a0_0x1c6356;try{const _0x38559a=await getDownloadInfo(_0x52270d);await replyMessage(_0x2c1051,_0xa7004c(0x157)+_0x38559a[_0xa7004c(0x179)]);const _0x32854c=path[_0xa7004c(0x180)](TEMP_DIR,_0x38559a[_0xa7004c(0x179)]);await downloadFile(_0x38559a[_0xa7004c(0x151)],_0x32854c),await _0x2ea853[_0xa7004c(0x159)](_0x2c1051[_0xa7004c(0x14f)][_0x548496(0x93)],{'document':fsSync['createReadStream'](_0x32854c),'fileName':_0x38559a[_0x548496(0x92)],'mimetype':_0x38559a[_0x548496(0xbe)]||_0xa7004c(0x17b)},{'quoted':_0x2c1051}),await fs[_0xa7004c(0x173)](_0x32854c),await replyMessage(_0x2c1051,_0xa7004c(0x16d)+_0x38559a[_0xa7004c(0x179)]);}catch(_0x5cfa32){throw new Error(_0xa7004c(0x161)+_0x5cfa32[_0x548496(0x8d)]);}}async function getDownloadInfo(_0x379d8b){const _0x4d2d9b=a0_0x2a36a3,_0x28543f=a0_0x1c6356;try{const _0x1b768c=await axios[_0x4d2d9b(0xa2)](_0x28543f(0x178)+_0x379d8b+_0x28543f(0x15f),{'headers':{'User-Agent':_0x28543f(0x181)},'maxRedirects':0x0,'validateStatus':_0x1103ae=>_0x1103ae>=0xc8&&_0x1103ae<0x190}),_0x2de83a=_0x1b768c[_0x28543f(0x183)][_0x28543f(0x160)](/confirm=([^&]+)/)?.[0x1],_0x292b9d=_0x1b768c[_0x4d2d9b(0x97)][_0x28543f(0x165)]?.[_0x28543f(0x152)](_0x463501=>_0x463501[_0x4d2d9b(0xc1)](';')[0x0])[_0x4d2d9b(0x9a)](';\x20');let _0x430ee1,_0x35e6d6=_0x379d8b,_0x30fee8=_0x28543f(0x17b);_0x2de83a?_0x430ee1=_0x28543f(0x178)+_0x379d8b+_0x28543f(0x182)+_0x2de83a:_0x430ee1=_0x4d2d9b(0x82)+_0x379d8b+_0x4d2d9b(0xa4);const _0xd97715=_0x1b768c['headers'][_0x28543f(0x17c)];if(_0xd97715){const _0x2bd21d=_0xd97715[_0x4d2d9b(0x85)](/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/i);_0x2bd21d&&(_0x35e6d6=decodeURIComponent(_0x2bd21d[0x1]));}const _0x431a2d=_0x1b768c[_0x4d2d9b(0x97)][_0x28543f(0x150)];return _0x431a2d&&(_0x30fee8=_0x431a2d),{'downloadUrl':_0x430ee1,'fileName':_0x35e6d6,'mimeType':_0x30fee8,'cookies':_0x292b9d};}catch(_0x437547){throw new Error(_0x28543f(0x14e)+_0x437547[_0x28543f(0x166)]);}}async function downloadFile(_0x2a582d,_0x46172d){const _0x18eab7=a0_0x2a36a3,_0x5d71a8=a0_0x1c6356,_0x3d08e5=await axios({'method':_0x18eab7(0xb7),'url':_0x2a582d,'responseType':_0x18eab7(0xac),'headers':{'User-Agent':_0x5d71a8(0x181)}}),_0x2e6f1d=fsSync[_0x18eab7(0xaa)](_0x46172d);return _0x3d08e5[_0x5d71a8(0x183)][_0x5d71a8(0x15e)](_0x2e6f1d),new Promise((_0x396358,_0x255350)=>{const _0x3f0339=_0x18eab7;_0x2e6f1d['on']('finish',_0x396358),_0x2e6f1d['on'](_0x3f0339(0xbb),_0x255350);});}function isValidDriveUrl(_0x38e23b){const _0xd11dd2=a0_0x1c6356;return/drive\.google\.com\/(file\/d\/|drive\/folders\/)/i[_0xd11dd2(0x171)](_0x38e23b);}function a0_0x2e5f(_0x526150,_0xfe36e){const _0x460c6b=a0_0x460c();return a0_0x2e5f=function(_0x2e5f5d,_0x2a6b6a){_0x2e5f5d=_0x2e5f5d-0x82;let _0x2628a2=_0x460c6b[_0x2e5f5d];return _0x2628a2;},a0_0x2e5f(_0x526150,_0xfe36e);}function extractFileId(_0x530729){const _0x4df722=a0_0x1c6356,_0x4f1ff3=_0x530729[_0x4df722(0x160)](/\/file\/d\/([^/]+)/);return _0x4f1ff3?_0x4f1ff3[0x1]:null;}async function replyMessage(_0x233415,_0x50c3e6){const _0xaa059e=a0_0x1c6356;return await global[_0xaa059e(0x17d)][_0xaa059e(0x176)](_0x233415,_0x50c3e6);}function a0_0x460c(){const _0x1c93e1=['28930968PMkumR','1621630BDYDMR','gdrive','reply','mkdir','https://drive.google.com/drive/folders/','Folder\x20processing\x20failed:\x20','get','344433kSfdoY','&export=download','Download\x20files/folders\x20from\x20Google\x20Drive','332600thvIMr','Failed\x20to\x20get\x20download\x20info:\x20','92cKRnOJ','âŒ\x20Invalid\x20Google\x20Drive\x20URL.','createWriteStream','359256xFodeJ','stream','exports','\x20files.\x20Starting\x20download...','data','2587203iUCOLF','â³\x20Downloading:\x20','11YzsYmp','9QfXnQP','âœ…\x20Folder\x20download\x20completed!','544733CkKEvb','kord','GET','111213HNlJBo','&export=download&confirm=','../tmp/','error','pipe','Failed\x20to\x20get\x20folder\x20contents:\x20','mimeType','2206542dENppL','path','split','content-type','8GAeIJX','ðŸ“\x20Processing\x20Google\x20Drive\x20link...','unlink','test','15298amXbXk','googledrive','shift','860236cOIJQo','Invalid\x20folder\x20URL','227VhWFef','https://drive.google.com/uc?id=','/folders/','application/octet-stream','match','length','âŒ\x20Error:\x20','Download','âŒ\x20Please\x20provide\x20a\x20Google\x20Drive\x20URL.','set-cookie','push','570KkXbZp','message','downloadUrl','Unknown\x20error\x20occurred','No\x20accessible\x20files\x20found','key','fileName','remoteJid','includes','Invalid\x20file\x20URL','130730HSwSPb','headers','content-disposition','sendMessage','join'];a0_0x460c=function(){return _0x1c93e1;};return a0_0x460c();}((async()=>{const _0x5d35d9=a0_0x1c6356;try{await fs[_0x5d35d9(0x162)](TEMP_DIR);}catch{await fs[_0x5d35d9(0x15b)](TEMP_DIR,{'recursive':!![]});}})());