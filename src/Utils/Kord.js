const a0_0x4268f5=a0_0x2b2b;(function(_0x177356,_0x4c5657){const _0x4a2f24=a0_0x2b2b,_0x266dfe=_0x177356();while(!![]){try{const _0x407c21=-parseInt(_0x4a2f24(0xce))/0x1*(parseInt(_0x4a2f24(0xbc))/0x2)+parseInt(_0x4a2f24(0xc4))/0x3+-parseInt(_0x4a2f24(0xc8))/0x4+-parseInt(_0x4a2f24(0xa0))/0x5*(parseInt(_0x4a2f24(0xc5))/0x6)+-parseInt(_0x4a2f24(0x85))/0x7*(parseInt(_0x4a2f24(0xc9))/0x8)+parseInt(_0x4a2f24(0xa2))/0x9*(-parseInt(_0x4a2f24(0xb2))/0xa)+-parseInt(_0x4a2f24(0xd0))/0xb*(-parseInt(_0x4a2f24(0xa5))/0xc);if(_0x407c21===_0x4c5657)break;else _0x266dfe['push'](_0x266dfe['shift']());}catch(_0x17a293){_0x266dfe['push'](_0x266dfe['shift']());}}}(a0_0x481f,0x3748a));const fs=require('fs')[a0_0x4268f5(0xd9)],fss=require('fs'),path=require(a0_0x4268f5(0x77)),{default:makeWASocket,useMultiFileAuthState,DisconnectReason,fetchLatestBaileysVersion,makeCacheableSignalKeyStore,makeInMemoryStore}=require(a0_0x4268f5(0x81)),{Boom}=require(a0_0x4268f5(0x8b)),pino=require('pino'),NodeCache=require('node-cache'),chalk=require('chalk'),axios=require('axios'),{setupAntidelete}=require(a0_0x4268f5(0xb0)),antilinkCommand=require(a0_0x4268f5(0xcf)),chatbotModule=require(a0_0x4268f5(0x9c)),{kordMsg}=require(a0_0x4268f5(0x8a)),{initializeKordEvents}=require(a0_0x4268f5(0xb6)),{loadCommands}=require(a0_0x4268f5(0x95)),{againstEventManager}=require(a0_0x4268f5(0xb4)),SQLiteMessageStore=require('../Plugin/SQLitedb'),SESSION_DIR=path[a0_0x4268f5(0xaf)](__dirname,'..',a0_0x4268f5(0x86)),STORE_FILE_PATH=path[a0_0x4268f5(0xaf)](__dirname,'..',a0_0x4268f5(0xd2)),LOGGER=pino({'level':process[a0_0x4268f5(0xa8)]['LOG_LEVEL']||a0_0x4268f5(0xbb)}),MSG_RETRY_CACHE=new NodeCache();let messagesSent=0x0,heartbeatInterval,isRestarting=![];async function sendHeartbeat(){const _0x168b87=a0_0x4268f5;try{const _0x3a4603=global[_0x168b87(0xa4)][_0x168b87(0xe5)],_0x5bfe27=await axios[_0x168b87(0x87)](_0x168b87(0x9f),{'botId':_0x3a4603,'metadata':{'version':_0x168b87(0x7c),'messagesSent':messagesSent,'uptime':Math[_0x168b87(0xa7)](process[_0x168b87(0xaa)]()),'lastActive':new Date()['toISOString']()}},{'headers':{'x-api-key':_0x168b87(0xdd),'Content-Type':_0x168b87(0xbf)},'timeout':0x1388});_0x5bfe27[_0x168b87(0xa9)][_0x168b87(0xc2)]==='success'&&(console[_0x168b87(0x7e)](_0x168b87(0xba)),console[_0x168b87(0x7e)]('Last\x20heartbeat:',_0x5bfe27[_0x168b87(0xa9)][_0x168b87(0xa9)][_0x168b87(0x80)]));}catch(_0x2c480e){if(_0x2c480e[_0x168b87(0xb8)]){const _0x3df672=_0x2c480e[_0x168b87(0xb8)][_0x168b87(0xc2)],_0x2985bf=_0x2c480e[_0x168b87(0xb8)]['data']?.[_0x168b87(0xa3)]||_0x168b87(0x94);switch(_0x3df672){case 0x190:console[_0x168b87(0x70)]('Invalid\x20heartbeat\x20data:',_0x2985bf);break;case 0x191:console[_0x168b87(0x70)]('Authentication\x20failed.\x20Check\x20API\x20key');break;case 0x1f4:console[_0x168b87(0x70)]('Server\x20error:',_0x2985bf);break;default:console[_0x168b87(0x70)](_0x168b87(0xca)+_0x3df672+'):',_0x2985bf);}}else _0x2c480e[_0x168b87(0xa1)]?console['error']('No\x20response\x20from\x20heartbeat\x20server'):console[_0x168b87(0x70)]('Error\x20sending\x20heartbeat:',_0x2c480e['message']);}}let heartbeatFailures=0x0;const MAX_FAILURES=0x3,RETRY_DELAY=0x1388;async function startHeartbeat(){heartbeatInterval&&clearInterval(heartbeatInterval);heartbeatFailures=0x0;const _0x11299a=async()=>{const _0x3d35c8=a0_0x2b2b;try{await sendHeartbeat(),console[_0x3d35c8(0x7e)](chalk[_0x3d35c8(0xe6)](_0x3d35c8(0xbd))),heartbeatFailures=0x0;}catch(_0x4340f0){heartbeatFailures++;if(heartbeatFailures<MAX_FAILURES){console[_0x3d35c8(0x7e)](chalk[_0x3d35c8(0x79)](_0x3d35c8(0x97)+heartbeatFailures+'/'+MAX_FAILURES+_0x3d35c8(0x8f))),setTimeout(_0x11299a,RETRY_DELAY);return;}console[_0x3d35c8(0x70)](chalk[_0x3d35c8(0xe2)](_0x3d35c8(0xea)));}};await _0x11299a(),heartbeatInterval=setInterval(async()=>{const _0x216b06=a0_0x2b2b;try{await sendHeartbeat(),heartbeatFailures=0x0;}catch(_0x1b08ff){heartbeatFailures++,heartbeatFailures>=MAX_FAILURES&&(console['error'](chalk['red'](_0x216b06(0xac))),await stopHeartbeat());}},0x5*0x3c*0x3e8);}function a0_0x2b2b(_0x3217e1,_0xeb5273){const _0x481ff9=a0_0x481f();return a0_0x2b2b=function(_0x2b2b47,_0x4b5bf9){_0x2b2b47=_0x2b2b47-0x6e;let _0xc170b7=_0x481ff9[_0x2b2b47];return _0xc170b7;},a0_0x2b2b(_0x3217e1,_0xeb5273);}function a0_0x481f(){const _0x46e6e6=['floor','env','data','uptime','remoteJid','Multiple\x20heartbeat\x20failures\x20detected,\x20stopping\x20heartbeat\x20service','Error\x20in\x20getAuthState:','replace','join','../Antidelete','Connected\x20successfully!\x20ðŸŽ‰','10lOSCwR','blue','../Plugin/kordEventHandle','SESSION_ID','../Plugin/kordEvent','statusCode','response','No\x20SESSION_ID\x20in\x20config\x20or\x20creds.json\x20found.\x20Proceeding\x20to\x20pairing\x20code...','Heartbeat\x20recorded\x20successfully','silent','34oOeVAd','Initial\x20heartbeat\x20established','Restarting\x20bot\x20in\x205\x20seconds...','application/json','Reconnecting:','json','status','registered','496140thJFwM','13134ZevvWb','Using\x20SESSION_ID\x20from\x20existing\x20creds.json','open','1793592bYdsYl','2480ujBavB','Heartbeat\x20failed\x20(','Invalid\x20or\x20missing\x20data\x20in\x20API\x20response','exports','get','26413JukvbO','../Commands/Bot/antilink','1487607iAtYVi','writeFileSync','store.json','Using\x20multi-file\x20auth\x20state.','messages','keys','Initiating\x20bot\x20restart...','API\x20Response:','creds.update','promises','?apikey=kordAi.key','Failed\x20to\x20fetch\x20credentials\x20from\x20API','cyan','kordAi.key','toISOString','startsWith','messages.update','success','red','existsSync','requestPairingCode','OWNER_NAME','green','https://kordai-dash.vercel.app/api/files/fetch/','kord_ai-','Message\x20update\x20event\x20detected','Failed\x20to\x20establish\x20initial\x20heartbeat','split','Pairing\x20Code\x20for\x20','error','reason:','Received\x20SIGINT.\x20Initiating\x20restart\x20procedure...','trim','Using\x20WA\x20v','Error\x20in\x20antidelete\x20execution:','creds','path','SIGINT','yellow','uncaughtException','connection.update','1.0.0','KordAI\x20session\x20ID\x20detected,\x20fetching\x20credentials\x20from\x20API...','log','loggedOut','lastHeartbeat','@whiskeysockets/baileys','Commands','authState','Connection\x20closed\x20due\x20to:','4991DImQtS','Session','post','initialize','clearOldMessages','../Plugin/kordMsg','@hapi/boom','OWNER_NUMBERS','close','from',')...','init','utf-8','update','Error\x20fetching\x20credentials\x20from\x20API:','Unknown\x20error','../Plugin/kordLoadCmd',',\x20isLatest:\x20','Retrying\x20initial\x20heartbeat\x20(','bind','base64','unhandledRejection','Uncaught\x20Exception:','../Commands/Bot/bot','Failed\x20to\x20send\x20offline\x20status\x20update','Error\x20during\x20restart:','https://kordai-dash.vercel.app/api/status/heartbeat','85yRmqvX','request','3681dfOEuV','message','settings','108WoLrhx','Error\x20in\x20kordAi:'];a0_0x481f=function(){return _0x46e6e6;};return a0_0x481f();}async function stopHeartbeat(){const _0x522e01=a0_0x4268f5;if(heartbeatInterval){clearInterval(heartbeatInterval),heartbeatInterval=null,console['log'](chalk[_0x522e01(0x79)]('Heartbeat\x20service\x20stopped'));try{await axios['post'](_0x522e01(0x9f),{'botId':'kordai-test','metadata':{'version':'1.0.0','messagesSent':messagesSent,'uptime':Math[_0x522e01(0xa7)](process[_0x522e01(0xaa)]()),'lastActive':new Date()[_0x522e01(0xde)](),'status':'offline'}},{'headers':{'x-api-key':'kordAi.key','Content-Type':_0x522e01(0xbf)}});}catch(_0x1b9325){console['error'](chalk[_0x522e01(0xe2)](_0x522e01(0x9d)));}}}async function getAuthState(){const _0x37c68e=a0_0x4268f5,_0x49a1a5=path[_0x37c68e(0xaf)](SESSION_DIR,'creds.json');try{let _0x13f6c4=global['settings'][_0x37c68e(0xb5)];if(_0x13f6c4&&_0x13f6c4!==''){if(_0x13f6c4[_0x37c68e(0xdf)](_0x37c68e(0xe8))){console[_0x37c68e(0x7e)](chalk[_0x37c68e(0xb3)](_0x37c68e(0x7d)));try{const _0x3bab6f=_0x13f6c4[_0x37c68e(0xae)](_0x37c68e(0xe8),''),_0x961dd4=await axios['get'](_0x37c68e(0xe7)+_0x3bab6f+_0x37c68e(0xda));if(_0x961dd4[_0x37c68e(0xa9)][_0x37c68e(0xc2)]===_0x37c68e(0xe1)&&_0x961dd4[_0x37c68e(0xa9)][_0x37c68e(0xa9)]){!fss['existsSync'](SESSION_DIR)&&fss['mkdirSync'](SESSION_DIR,{'recursive':!![]});const _0x3d9181=JSON['stringify'](_0x961dd4['data']['data'],null,0x2);fss[_0x37c68e(0xd1)](_0x49a1a5,_0x3d9181),console[_0x37c68e(0x7e)](chalk['green']('Successfully\x20fetched\x20and\x20saved\x20credentials\x20from\x20API'));}else throw new Error(_0x37c68e(0xcb));}catch(_0x51924f){console[_0x37c68e(0x70)](chalk[_0x37c68e(0xe2)](_0x37c68e(0x93),_0x51924f['message']));_0x51924f[_0x37c68e(0xb8)]&&console[_0x37c68e(0x70)](chalk[_0x37c68e(0xe2)](_0x37c68e(0xd7),_0x51924f['response']['data']));throw new Error(_0x37c68e(0xdb));}}else{console['log'](chalk[_0x37c68e(0xb3)]('Using\x20base64\x20encoded\x20session\x20ID\x20from\x20config'));const _0x2b06a7=Buffer[_0x37c68e(0x8e)](_0x13f6c4,_0x37c68e(0x99))['toString']('utf-8');fss[_0x37c68e(0xd1)](_0x49a1a5,_0x2b06a7);}}else{if(fss[_0x37c68e(0xe3)](_0x49a1a5)){const _0x50863b=fss['readFileSync'](_0x49a1a5,_0x37c68e(0x91)),_0x55f2b0=JSON['parse'](_0x50863b);console[_0x37c68e(0x7e)](chalk[_0x37c68e(0xb3)](_0x37c68e(0xc6))),_0x13f6c4=_0x55f2b0;}else console[_0x37c68e(0x7e)](chalk[_0x37c68e(0x79)](_0x37c68e(0xb9)));}return console['log'](chalk[_0x37c68e(0xdc)](_0x37c68e(0xd3))),await useMultiFileAuthState(SESSION_DIR);}catch(_0x339d37){console[_0x37c68e(0x70)](chalk[_0x37c68e(0xe2)](_0x37c68e(0xad),_0x339d37));throw _0x339d37;}}async function restartBot(_0x128bbc,_0x246c85){const _0x57881f=a0_0x4268f5;if(isRestarting)return;isRestarting=!![],console['log'](chalk['yellow'](_0x57881f(0xd6)));try{console['log'](chalk[_0x57881f(0xe6)](_0x57881f(0xbe))),setTimeout(async()=>{const _0xd08956=_0x57881f;try{isRestarting=![],await kordAi(_0x128bbc,_0x246c85),console['log'](chalk[_0xd08956(0xe6)]('Bot\x20restarted\x20successfully'));}catch(_0x345d36){console[_0xd08956(0x70)](chalk[_0xd08956(0xe2)](_0xd08956(0x9e),_0x345d36)),setTimeout(()=>restartBot(_0x128bbc,_0x246c85),0x7530);}},0x1388);}catch(_0x257d64){console[_0x57881f(0x70)](chalk['red']('Error\x20during\x20restart\x20preparation:',_0x257d64)),isRestarting=![],setTimeout(()=>restartBot(_0x128bbc,_0x246c85),0x7530);}}async function kordAi(_0x165f9d,_0x479c92){const _0x46c1d5=a0_0x4268f5;try{await loadCommands(path[_0x46c1d5(0xaf)](__dirname,'..',_0x46c1d5(0x82))),_0x479c92[_0x46c1d5(0xcd)]('/messagestotal',(_0x1325e7,_0x2554c9)=>{const _0x3e4b7d=_0x46c1d5;_0x2554c9[_0x3e4b7d(0xc1)]({'messageTotal':messagesSent});});const _0x58182a=new SQLiteMessageStore(LOGGER);await _0x58182a[_0x46c1d5(0x88)](),setInterval(()=>_0x58182a[_0x46c1d5(0x89)](0x1),0x18*0x3c*0x3c*0x3e8);const {state:_0x183534,saveCreds:_0x57a5ac}=await getAuthState(),{version:_0x4f7d17,isLatest:_0xcaf6f9}=await fetchLatestBaileysVersion();console[_0x46c1d5(0x7e)](chalk['cyan'](_0x46c1d5(0x74)+_0x4f7d17[_0x46c1d5(0xaf)]('.')+_0x46c1d5(0x96)+_0xcaf6f9));const _0x13e368=makeWASocket({'version':_0x4f7d17,'auth':{'creds':_0x183534[_0x46c1d5(0x76)],'keys':makeCacheableSignalKeyStore(_0x183534[_0x46c1d5(0xd5)],LOGGER)},'printQRInTerminal':![],'logger':LOGGER,'msgRetryCounterCache':MSG_RETRY_CACHE,'generateHighQualityLinkPreview':!![],'defaultQueryTimeoutMs':undefined,'getMessage':async _0x2767cb=>{const _0x5b9708=_0x46c1d5,_0x2f3aa1=await _0x58182a['loadMessage'](_0x2767cb[_0x5b9708(0xab)],_0x2767cb['id']);return _0x2f3aa1?.[_0x5b9708(0xa3)]||undefined;}});await _0x58182a[_0x46c1d5(0x98)](_0x13e368['ev']),await againstEventManager['init'](_0x13e368),initializeKordEvents(_0x13e368),_0x13e368['ev']['on'](_0x46c1d5(0xd8),_0x57a5ac),_0x13e368['ev']['on']('messages.upsert',async _0x2a03b0=>{const _0x18f3fb=_0x46c1d5,_0x44a864=_0x2a03b0[_0x18f3fb(0xd4)][0x0];_0x44a864&&(messagesSent++,await kordMsg(_0x13e368,_0x44a864));}),_0x13e368['ev']['on'](_0x46c1d5(0xe0),async _0x1678d1=>{const _0x84bc8a=_0x46c1d5;console[_0x84bc8a(0x7e)](chalk[_0x84bc8a(0x79)](_0x84bc8a(0xe9)));try{const _0x18faaf=await setupAntidelete(_0x13e368,_0x58182a);for(const _0x4b41df of _0x1678d1){(_0x4b41df[_0x84bc8a(0x92)]['message']===null||_0x4b41df[_0x84bc8a(0x92)]['messageStubType']===0x2)&&await _0x18faaf['execute'](_0x13e368,_0x4b41df,{'store':_0x58182a});}}catch(_0x57e5ca){console[_0x84bc8a(0x70)](chalk['red'](_0x84bc8a(0x75),_0x57e5ca));}}),_0x13e368['ev']['on'](_0x46c1d5(0x7b),async _0x33c89d=>{const _0x4bbc1a=_0x46c1d5,{connection:_0x1eacfa,lastDisconnect:_0x35dd0a}=_0x33c89d;if(_0x1eacfa===_0x4bbc1a(0xc7)){console[_0x4bbc1a(0x7e)](chalk[_0x4bbc1a(0xe6)](_0x4bbc1a(0xb1))),chatbotModule[_0x4bbc1a(0x90)](_0x13e368),antilinkCommand['init'](_0x13e368),await startHeartbeat();if(!_0x13e368[_0x4bbc1a(0x83)][_0x4bbc1a(0x76)][_0x4bbc1a(0xc3)]){const _0x4a7926=global[_0x4bbc1a(0xa4)][_0x4bbc1a(0x8c)][_0x4bbc1a(0x6e)](',')[0x0][_0x4bbc1a(0x73)](),_0x498aad=await _0x13e368[_0x4bbc1a(0xe4)](_0x4a7926);console[_0x4bbc1a(0x7e)](chalk[_0x4bbc1a(0xb3)](_0x4bbc1a(0x6f)+_0x4a7926+':\x20'+_0x498aad));}}if(_0x1eacfa===_0x4bbc1a(0x8d)){await stopHeartbeat();const _0x27b8eb=new Boom(_0x35dd0a?.[_0x4bbc1a(0x70)])?.['output']?.[_0x4bbc1a(0xb7)]!==DisconnectReason[_0x4bbc1a(0x7f)];console[_0x4bbc1a(0x7e)](chalk['yellow'](_0x4bbc1a(0x84),_0x35dd0a?.[_0x4bbc1a(0x70)],_0x4bbc1a(0xc0),_0x27b8eb)),_0x27b8eb&&setTimeout(()=>restartBot(_0x165f9d,_0x479c92),0x1388);}}),process['on'](_0x46c1d5(0x78),async()=>{const _0x22abda=_0x46c1d5;console[_0x22abda(0x7e)](chalk['yellow'](_0x22abda(0x72))),await restartBot(_0x165f9d,_0x479c92);}),process['on'](_0x46c1d5(0x7a),async _0x5f2450=>{const _0x35b94f=_0x46c1d5;console[_0x35b94f(0x70)](chalk[_0x35b94f(0xe2)](_0x35b94f(0x9b),_0x5f2450)),await restartBot(_0x165f9d,_0x479c92);}),process['on'](_0x46c1d5(0x9a),async(_0x414bc4,_0x435418)=>{const _0x3de0d8=_0x46c1d5;console[_0x3de0d8(0x70)](chalk[_0x3de0d8(0xe2)]('Unhandled\x20Rejection\x20at:',_0x435418,_0x3de0d8(0x71),_0x414bc4)),await restartBot(_0x165f9d,_0x479c92);});}catch(_0x88744e){console[_0x46c1d5(0x70)](chalk[_0x46c1d5(0xe2)](_0x46c1d5(0xa6),_0x88744e)),setTimeout(()=>restartBot(_0x165f9d,_0x479c92),0x1388);}}module[a0_0x4268f5(0xcc)]={'kordAi':kordAi};