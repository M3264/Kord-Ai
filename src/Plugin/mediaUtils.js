function a0_0x1711(){const _0x1010fc=['videoMessage','257887EIrNGd','messages.db','Database\x20not\x20initialized','green','2102271bvCUJb','remoteJid','âŒ\x20Error\x20setting\x20up\x20MediaUtils','exports','gray','clear','parse','âœ…\x20Status\x20message\x20forwarded\x20to\x20','âœ…\x20Status\x20database\x20initialized\x20successfully','4BhLrev','setup','ðŸš«\x20Skipping\x20view-once\x20message\x20from/to\x20owner','red','processedStatusDownloads','Error\x20forwarding\x20status\x20message:','viewOnceMessageV2','path','chalk','22OMEfhJ','quotedMessage','add','processedViewOnceMessages','204ynHVvo','752104nJroBU','handleViewOnceMessage','286586QsiQgp','âœ…\x20View\x20Once\x20message\x20forwarded\x20to\x20owner:\x20','readFromDB','80994996RdJDFi','No\x20message\x20found\x20in\x20database','extendedTextMessage','initializeStatusDB','status@broadcast','viewOnceMessage','participant','@s.whatsapp.net','cyan','15964BHniOL','*STATUS*','sendMessage','imageMessage','createFakeReply','user','./kordlogger','162HtVHhR','replace','info','viewOnceImageMessage','contextInfo','OWNER_NUMBERS','sqlite3','615CsRplA','5853430ykdsCz','get','statusMessage','text','key','âœ…\x20MediaUtils\x20Status\x20Download\x20setup\x20complete','*ANTIVIEWONCE\x20DETECTED*','viewOnceVideoMessage','error','âŒ\x20Error\x20initializing\x20status\x20database:','delete','viewOnce','clearProcessedViewOnceMessages','message','getQuotedStatus','stanzaId','video','ðŸ§¹\x20Cleaned\x20up\x20view-once\x20message\x20ID:\x20','forwardStatusToOwner','isViewOnceMessage','clearProcessedStatusDownloads','âŒ\x20Error\x20handling\x20view\x20once\x20message:','sock'];a0_0x1711=function(){return _0x1010fc;};return a0_0x1711();}const a0_0x5ecc1b=a0_0x1639;(function(_0x547c81,_0x2a058c){const _0x4ca0b1=a0_0x1639,_0x2a5d6e=_0x547c81();while(!![]){try{const _0x5607ed=-parseInt(_0x4ca0b1(0x13c))/0x1*(parseInt(_0x4ca0b1(0x12c))/0x2)+-parseInt(_0x4ca0b1(0x123))/0x3+-parseInt(_0x4ca0b1(0x148))/0x4*(parseInt(_0x4ca0b1(0x156))/0x5)+parseInt(_0x4ca0b1(0x139))/0x6*(-parseInt(_0x4ca0b1(0x11f))/0x7)+parseInt(_0x4ca0b1(0x13a))/0x8*(-parseInt(_0x4ca0b1(0x14f))/0x9)+parseInt(_0x4ca0b1(0x157))/0xa*(-parseInt(_0x4ca0b1(0x135))/0xb)+parseInt(_0x4ca0b1(0x13f))/0xc;if(_0x5607ed===_0x2a058c)break;else _0x2a5d6e['push'](_0x2a5d6e['shift']());}catch(_0x5d9c43){_0x2a5d6e['push'](_0x2a5d6e['shift']());}}}(a0_0x1711,0xd437f));const sqlite3=require(a0_0x5ecc1b(0x155)),{open}=require('sqlite'),path=require(a0_0x5ecc1b(0x133)),logger=require(a0_0x5ecc1b(0x14e)),chalk=require(a0_0x5ecc1b(0x134));function a0_0x1639(_0x2fc18a,_0x1d889f){const _0x171158=a0_0x1711();return a0_0x1639=function(_0x16393e,_0x575afe){_0x16393e=_0x16393e-0x108;let _0x5186ff=_0x171158[_0x16393e];return _0x5186ff;},a0_0x1639(_0x2fc18a,_0x1d889f);}class MediaUtils{constructor(_0x46b0f9){const _0x5ba117=a0_0x5ecc1b;this[_0x5ba117(0x11d)]=_0x46b0f9,this[_0x5ba117(0x130)]=new Set(),this[_0x5ba117(0x138)]=new Set(),this['db']=null;}async[a0_0x5ecc1b(0x142)](){const _0x436ce7=a0_0x5ecc1b;try{this['db']=await open({'filename':path['join'](__dirname,'..',_0x436ce7(0x120)),'driver':sqlite3['Database']}),logger[_0x436ce7(0x151)](chalk['green'](_0x436ce7(0x12b)));}catch(_0xac3e27){logger[_0x436ce7(0x10f)](chalk[_0x436ce7(0x12f)](_0x436ce7(0x110)),_0xac3e27);throw _0xac3e27;}}async['handlePotentialStatusDownload'](_0x33aa80){const _0x4d0445=a0_0x5ecc1b,_0x5c5c91=_0x4d0445(0x143),_0x1e389a=_0x33aa80[_0x4d0445(0x114)]?.['extendedTextMessage']?.[_0x4d0445(0x153)],_0x4517ff=_0x1e389a?.[_0x4d0445(0x136)],_0x3af713=_0x1e389a?.[_0x4d0445(0x116)],_0x56e3fe=_0x1e389a?.[_0x4d0445(0x145)],_0x12f629=_0x33aa80[_0x4d0445(0x10b)]['participant']||_0x33aa80[_0x4d0445(0x10b)]['remoteJid'];if(_0x4517ff&&(_0x4517ff[_0x4d0445(0x109)]||_0x4517ff[_0x4d0445(0x14b)]||_0x4517ff['videoMessage'])){const _0x32cfba=this[_0x4d0445(0x115)](_0x33aa80),_0x30a55e=this[_0x4d0445(0x11d)][_0x4d0445(0x14d)]['id'][_0x4d0445(0x150)](':1','');if(_0x56e3fe===_0x30a55e){const _0x901a7e=await this[_0x4d0445(0x13e)](_0x5c5c91,_0x3af713);if(!_0x901a7e)return;}_0x32cfba&&_0x3af713&&!this[_0x4d0445(0x130)]['has'](_0x3af713)&&(this[_0x4d0445(0x130)]['add'](_0x3af713),await this[_0x4d0445(0x119)](_0x5c5c91,_0x3af713,{..._0x33aa80,'key':{..._0x33aa80[_0x4d0445(0x10b)],'id':_0x3af713,'participant':_0x56e3fe}},_0x12f629),setTimeout(()=>{const _0x49a969=_0x4d0445;this[_0x49a969(0x130)][_0x49a969(0x111)](_0x3af713);},0x36ee80));}}async[a0_0x5ecc1b(0x13e)](_0x133456,_0x5c9b36){const _0x3b8b92=a0_0x5ecc1b;if(!this['db'])return logger[_0x3b8b92(0x10f)](_0x3b8b92(0x121)),null;try{const _0x37cabc=await this['db'][_0x3b8b92(0x108)]('SELECT\x20message\x20FROM\x20messages\x20WHERE\x20remoteJid\x20=\x20?\x20AND\x20id\x20=\x20?',[_0x133456,_0x5c9b36]);return _0x37cabc?JSON[_0x3b8b92(0x129)](_0x37cabc[_0x3b8b92(0x114)]):null;}catch(_0x50bb9f){return logger[_0x3b8b92(0x10f)]('Error\x20reading\x20from\x20database',_0x50bb9f),null;}}[a0_0x5ecc1b(0x115)](_0x10e70f){const _0x52923f=a0_0x5ecc1b,_0x5ea61b=_0x10e70f['message']?.[_0x52923f(0x141)]?.['contextInfo']?.[_0x52923f(0x136)];if(!_0x5ea61b)return null;if(_0x5ea61b[_0x52923f(0x14b)])return{'type':'image','message':_0x5ea61b[_0x52923f(0x14b)]};else{if(_0x5ea61b[_0x52923f(0x11e)])return{'type':_0x52923f(0x117),'message':_0x5ea61b[_0x52923f(0x11e)]};else{if(_0x5ea61b[_0x52923f(0x109)])return{'type':_0x52923f(0x10a),'message':_0x5ea61b['statusMessage']};}}return null;}async[a0_0x5ecc1b(0x119)](_0x20a5e2,_0x32c4aa,_0x29e9c8,_0x14f451=null){const _0x3f34ef=a0_0x5ecc1b;try{const _0x4669a7=await this['readFromDB'](_0x20a5e2,_0x32c4aa);if(!_0x4669a7)return logger[_0x3f34ef(0x10f)](chalk[_0x3f34ef(0x12f)](_0x3f34ef(0x140))),null;const _0x26d215=_0x29e9c8[_0x3f34ef(0x10b)]['participant']||_0x29e9c8[_0x3f34ef(0x10b)][_0x3f34ef(0x124)],_0x32dc4c=_0x14f451||global['settings']?.[_0x3f34ef(0x154)]+'@s.whatsapp.net',_0x310677=await this[_0x3f34ef(0x11d)][_0x3f34ef(0x14a)](_0x32dc4c,{'forward':_0x4669a7},{'quoted':this['createFakeReply'](_0x32c4aa,_0x26d215)});return logger[_0x3f34ef(0x151)](chalk[_0x3f34ef(0x122)](_0x3f34ef(0x12a)+_0x32dc4c+':\x20'+_0x32c4aa)),_0x310677;}catch(_0x359cd7){return logger[_0x3f34ef(0x10f)](chalk[_0x3f34ef(0x12f)](_0x3f34ef(0x131)),_0x359cd7),null;}}[a0_0x5ecc1b(0x14c)](_0xf36321,_0x485501){const _0x417093=a0_0x5ecc1b;return{'key':{'fromMe':![],'participant':_0x485501,'remoteJid':_0x417093(0x143),'id':_0xf36321},'message':{'conversation':_0x417093(0x149)}};}[a0_0x5ecc1b(0x11a)](_0x5894b0){const _0x41ce5c=a0_0x5ecc1b;return _0x5894b0['message']?.[_0x41ce5c(0x14b)]?.['viewOnce']||_0x5894b0['message']?.[_0x41ce5c(0x11e)]?.[_0x41ce5c(0x112)]||_0x5894b0[_0x41ce5c(0x114)]?.[_0x41ce5c(0x144)]||_0x5894b0['message']?.[_0x41ce5c(0x132)]||_0x5894b0['message']?.[_0x41ce5c(0x152)]||_0x5894b0[_0x41ce5c(0x114)]?.[_0x41ce5c(0x10e)];}async[a0_0x5ecc1b(0x13b)](_0x46a29d){const _0x1c6db0=a0_0x5ecc1b;try{const _0x1424d5=_0x46a29d['key']['participant']||_0x46a29d[_0x1c6db0(0x10b)][_0x1c6db0(0x124)],_0x1f3564=global['settings']?.[_0x1c6db0(0x154)]+_0x1c6db0(0x146);if(_0x1424d5===_0x1f3564||_0x46a29d[_0x1c6db0(0x10b)][_0x1c6db0(0x124)]===_0x1f3564){logger['debug'](chalk[_0x1c6db0(0x127)](_0x1c6db0(0x12e)));return;}this[_0x1c6db0(0x138)][_0x1c6db0(0x137)](_0x46a29d['key']['id']),logger[_0x1c6db0(0x151)](chalk[_0x1c6db0(0x147)]('ðŸ“·\x20View\x20Once\x20message\x20detected,\x20forwarding\x20to\x20owner...'));const _0x2fc748={'key':{'fromMe':![],'participant':_0x46a29d[_0x1c6db0(0x10b)][_0x1c6db0(0x124)],'remoteJid':_0x46a29d['key'][_0x1c6db0(0x145)]||_0x46a29d[_0x1c6db0(0x10b)][_0x1c6db0(0x124)],'id':_0x46a29d[_0x1c6db0(0x10b)]['id']},'message':{'conversation':_0x1c6db0(0x10d)}};await this[_0x1c6db0(0x11d)][_0x1c6db0(0x14a)](_0x1f3564,{'forward':_0x46a29d},{'quoted':_0x2fc748}),logger[_0x1c6db0(0x151)](chalk[_0x1c6db0(0x122)](_0x1c6db0(0x13d)+_0x1f3564)),setTimeout(()=>{const _0x5287d7=_0x1c6db0;this['processedViewOnceMessages'][_0x5287d7(0x111)](_0x46a29d[_0x5287d7(0x10b)]['id']),logger['debug'](chalk[_0x5287d7(0x127)](_0x5287d7(0x118)+_0x46a29d[_0x5287d7(0x10b)]['id']));},0x36ee80);}catch(_0x500e24){this[_0x1c6db0(0x138)][_0x1c6db0(0x111)](_0x46a29d[_0x1c6db0(0x10b)]['id']),logger[_0x1c6db0(0x10f)](chalk['red'](_0x1c6db0(0x11c)),_0x500e24);}}async[a0_0x5ecc1b(0x12d)](){const _0x360410=a0_0x5ecc1b;try{return await this[_0x360410(0x142)](),logger[_0x360410(0x151)](chalk[_0x360410(0x122)](_0x360410(0x10c))),this;}catch(_0x248622){logger[_0x360410(0x10f)](chalk['red'](_0x360410(0x125)),_0x248622);throw _0x248622;}}[a0_0x5ecc1b(0x11b)](){const _0x148abb=a0_0x5ecc1b;this[_0x148abb(0x130)][_0x148abb(0x128)]();}[a0_0x5ecc1b(0x113)](){const _0x3de478=a0_0x5ecc1b;this['processedViewOnceMessages'][_0x3de478(0x128)]();}}module[a0_0x5ecc1b(0x126)]={'MediaUtils':MediaUtils};