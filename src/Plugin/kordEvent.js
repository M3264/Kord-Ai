function _0x4458(_0x78dfbe,_0x370c8b){const _0x3f2e64=_0x3f2e();return _0x4458=function(_0x4458f6,_0x5f35df){_0x4458f6=_0x4458f6-0x19c;let _0x339629=_0x3f2e64[_0x4458f6];return _0x339629;},_0x4458(_0x78dfbe,_0x370c8b);}const _0x4429ab=_0x4458;(function(_0x22ca0c,_0x3d29ed){const _0x1c2114=_0x4458,_0x1e10d7=_0x22ca0c();while(!![]){try{const _0x303db1=-parseInt(_0x1c2114(0x226))/0x1+-parseInt(_0x1c2114(0x1e7))/0x2+-parseInt(_0x1c2114(0x24c))/0x3*(-parseInt(_0x1c2114(0x1ab))/0x4)+-parseInt(_0x1c2114(0x1fd))/0x5*(parseInt(_0x1c2114(0x20d))/0x6)+-parseInt(_0x1c2114(0x220))/0x7*(-parseInt(_0x1c2114(0x227))/0x8)+parseInt(_0x1c2114(0x215))/0x9*(parseInt(_0x1c2114(0x1a9))/0xa)+parseInt(_0x1c2114(0x1be))/0xb;if(_0x303db1===_0x3d29ed)break;else _0x1e10d7['push'](_0x1e10d7['shift']());}catch(_0x31914d){_0x1e10d7['push'](_0x1e10d7['shift']());}}}(_0x3f2e,0x7bda5));function _0x3f2e(){const _0x4480fd=['ðŸ·ï¸\x20Status\x20Type:\x20','*MESSAGE\x20FROM:*\x20@','setOwnerJid','groupMetadata','keys','green','exports','notifyOwnerAboutDeletedMessage','push','subject','26515MNeMYA','unlink','info','âŒ\x20Error\x20processing\x20update:','@g.us','[Unknown\x20Message\x20Type]','handleStatus','handleDeletedMessage','[Video]\x20','ðŸ”„\x20Handling\x20messages.delete\x20event','[Location]','ðŸ”„\x20Handling\x20messages.update\x20event','delete','handleMessagesDelete','deleteMessages','cleanupProcessedMessages','528uXgTfU','imageMessage','âŒ\x20Error\x20sending\x20deleted\x20message\x20notification:','ðŸ—‘ï¸\x20Deleted\x20media\x20file:\x20','DEBUG_MODE','\x20event:','debug','documentMessage','61011qtAkKp','scheduleMediaDeletion','âŒ\x20Owner\x20numbers\x20not\x20set\x20in\x20global\x20settings','Africa/Lagos','cleanupMessageStore','âŒ\x20Invalid\x20message\x20structure\x20in\x20downloadDeletedMedia','deleted_','initialize','âŒ\x20Error\x20deleting\x20media\x20file\x20','red','âš ï¸\x20Invalid\x20format\x20for\x20deleted\x20messages','95977nmfSfZ','âš ï¸\x20Unhandled\x20protocol\x20message\x20type:\x20','sendDeletedMessageInfo','debugMode','âŒ\x20Media\x20message\x20of\x20type\x20','getMessageContent','976024KhZwEl','344xNHSbz','message','length','âŒ\x20Error\x20marking\x20status\x20as\x20read:','startPeriodicCleanup','ðŸ“Š\x20Event\x20args:','getMediaType','ðŸ·ï¸\x20Message\x20Type:\x20','âš ï¸\x20getOriginalCaption:\x20Message\x20is\x20null\x20or\x20undefined','audioMessage','notify','has','0@s.whatsapp.net','yellow','find','mkdir','*CHAT:*\x20','sendDeletedTextNotification','scheduleMessageCleanup','ðŸ”„\x20Processing\x20message\x20','\x20from\x20processed\x20messages','ðŸ’¬\x20Status\x20Content:\x20','ðŸ“\x20Media\x20download\x20directory\x20created:\x20','isValidMessage','split','âŒ\x20Error\x20handling\x20','âš ï¸\x20getOriginalCaption:\x20No\x20caption\x20found\x20in\x20message','sendMessage','ðŸ”„\x20Handling\x20messages.upsert','stringify','storeCapacity','now','magenta','handleMessagesUpsert','âš ï¸\x20Skipping\x20message\x20with\x20no\x20content',',\x20Message\x20ID:\x20','gray','1353tXFmVW','locationMessage','âŒ\x20Error\x20processing\x20message\x20','application/octet-stream','text','messages.update','forEach','âœ…\x20KordEventsManager\x20initialized\x20successfully.','ownerJid','replace','storeMessage','processNormalMessage','âœ…\x20Deleted\x20message\x20notification\x20sent\x20to\x20owner.','object','isMediaMessage','handleMessagesUpdate','promises','âš ï¸\x20Unhandled\x20update\x20type:','[Image]\x20','getContactInfo','true','pushName','processedMessages','ðŸ”„\x20Sending\x20deleted\x20media\x20to\x20owner','ðŸ‘¤\x20User\x20JID:\x20','âŒ\x20Error\x20in\x20event\x20','toLocaleString','*[DELETED\x20MESSAGE]*\x0a\x0a','190LEYIqU','messages.upsert','8972wJZfWb','âŒ\x20Error\x20creating\x20media\x20download\x20directory:','fileName','add','\x20already\x20processed,\x20skipping.','chalk','slice','settings','extendedTextMessage','âš ï¸\x20Invalid\x20protocol\x20message\x20structure','ðŸ—¨ï¸\x20Chat\x20JID:\x20','videoMessage','conversation','remoteJid','status@broadcast','@whiskeysockets/baileys','entries','cyan','contactMessage','3836778TTvGNZ','*[DELETED\x20INFORMATION]*\x0a\x0a','splice','env','en-NG','createFakeReply','blue','initializeEventListeners','\x20chats','logMessageInfo','downloadDeletedMedia','participant','createMediaDownloadDirectory','getOriginalCaption','key','[Document]\x20','OWNER_NUMBERS','update','handleProtocolMessage','sendDeletedMediaNotification','error','mediaTimeout','set','ðŸ‘¤\x20Sender\x20JID:\x20','protocolMessage','mediaDownloadPath','âš ï¸\x20Deleted\x20message\x20not\x20found\x20in\x20store.\x20Chat\x20JID:\x20','type','ðŸ”„\x20Handling\x20event:\x20','[Audio]','Message','caption','catch','âœ…\x20Status\x20marked\x20as\x20read','warn','ðŸ”\x20Message\x20','ðŸ’¬\x20Message:\x20','ðŸ‘‚\x20Baileys\x20event\x20listeners\x20initialized.','handleEvent','getChatName','*DELETED\x20BY:*\x20@','257552MfPISj','stickerMessage','ðŸ§¹\x20Cleaned\x20up\x20message\x20store.\x20Current\x20size:\x20','[Sticker]','messageStore','size','get','âŒ\x20Error\x20getting\x20chat\x20name:','sendDeletedMessageNotification','@s.whatsapp.net','ðŸ“Š\x20New\x20status\x20update\x20received:','sock'];_0x3f2e=function(){return _0x4480fd;};return _0x3f2e();}const {downloadContentFromMessage}=require(_0x4429ab(0x1ba)),{kordCmdUpsert}=require('./kordCmd'),{EventEmitter}=require('events'),fs=require('fs')[_0x4429ab(0x19d)],logger=require('./kordlogger'),chalk=require(_0x4429ab(0x1b0));class KordEventsManager extends EventEmitter{constructor(_0x33a754){const _0x4c40c0=_0x4429ab;super(),this[_0x4c40c0(0x1f2)]=_0x33a754,this[_0x4c40c0(0x1a3)]=new Set(),this['mediaDownloadPath']='./media_downloads',this[_0x4c40c0(0x1eb)]=new Map(),this[_0x4c40c0(0x245)]=0x3e8,this[_0x4c40c0(0x223)]=process[_0x4c40c0(0x1c1)][_0x4c40c0(0x211)]===_0x4c40c0(0x1a1),this[_0x4c40c0(0x254)]=null,this['mediaTimeout']=0xf*0x3c*0x3e8;}async[_0x4429ab(0x21c)](){const _0x100abe=_0x4429ab;try{await this[_0x100abe(0x1ca)](),this[_0x100abe(0x1c5)](),this[_0x100abe(0x22b)](),this['setOwnerJid'](),logger[_0x100abe(0x1ff)](chalk[_0x100abe(0x1f8)](_0x100abe(0x253)));}catch(_0x45fa67){logger['error'](chalk[_0x100abe(0x21e)]('âŒ\x20Error\x20initializing\x20KordEventsManager:'),_0x45fa67);throw _0x45fa67;}}async[_0x4429ab(0x1ca)](){const _0x3926a0=_0x4429ab;try{await fs[_0x3926a0(0x236)](this[_0x3926a0(0x1d7)],{'recursive':!![]}),logger[_0x3926a0(0x1ff)](chalk[_0x3926a0(0x1c4)](_0x3926a0(0x23d)+this[_0x3926a0(0x1d7)]));}catch(_0x4c4235){logger['error'](chalk['red'](_0x3926a0(0x1ac)),_0x4c4235);throw _0x4c4235;}}[_0x4429ab(0x1c5)](){const _0x4ebf5f=_0x4429ab,_0x1a111f=[_0x4ebf5f(0x1aa),_0x4ebf5f(0x251),'messages.delete'];_0x1a111f[_0x4ebf5f(0x252)](_0x27d467=>{const _0x1f13b0=_0x4ebf5f;this[_0x1f13b0(0x1f2)]['ev']['on'](_0x27d467,(..._0x1e4876)=>this[_0x1f13b0(0x1e4)](_0x27d467,..._0x1e4876));}),logger[_0x4ebf5f(0x1ff)](chalk[_0x4ebf5f(0x1c4)](_0x4ebf5f(0x1e3)));}async['handleEvent'](_0x166da7,..._0x251d07){const _0x93591e=_0x4429ab;try{logger['debug'](chalk[_0x93591e(0x1bc)](_0x93591e(0x1da)+_0x166da7));this[_0x93591e(0x223)]&&logger['debug'](chalk[_0x93591e(0x24b)]('ðŸ“Š\x20Event\x20args:'),JSON[_0x93591e(0x244)](_0x251d07,null,0x2));switch(_0x166da7){case _0x93591e(0x1aa):await this[_0x93591e(0x248)](..._0x251d07);break;case _0x93591e(0x251):await this[_0x93591e(0x19c)](..._0x251d07);break;case'messages.delete':await this[_0x93591e(0x20a)](..._0x251d07);break;default:logger[_0x93591e(0x213)](chalk[_0x93591e(0x234)]('âš ï¸\x20Unhandled\x20event:\x20'+_0x166da7));break;}}catch(_0x29d39f){logger[_0x93591e(0x1d2)](chalk[_0x93591e(0x21e)](_0x93591e(0x240)+_0x166da7+_0x93591e(0x212)),_0x29d39f),this['emit'](_0x93591e(0x1d2),{'event':_0x166da7,'error':_0x29d39f,'args':_0x251d07});}}async[_0x4429ab(0x248)]({messages:_0x3335de}){const _0x435a8b=_0x4429ab;logger[_0x435a8b(0x213)](chalk[_0x435a8b(0x1bc)](_0x435a8b(0x243)));for(const _0x3f8721 of _0x3335de){if(!this[_0x435a8b(0x23e)](_0x3f8721))continue;const _0x5ceddc=_0x3f8721[_0x435a8b(0x1cc)]?.['id'],_0x2c5bd4=_0x3f8721[_0x435a8b(0x1cc)][_0x435a8b(0x1b8)];if(_0x2c5bd4===_0x435a8b(0x1b9)){await this[_0x435a8b(0x203)](_0x3f8721);continue;}this[_0x435a8b(0x256)](_0x2c5bd4,_0x3f8721);if(this[_0x435a8b(0x1a3)]['has'](_0x5ceddc)){logger['debug'](chalk[_0x435a8b(0x24b)](_0x435a8b(0x1e1)+_0x5ceddc+_0x435a8b(0x1af)));continue;}this['processedMessages'][_0x435a8b(0x1ae)](_0x5ceddc),logger['debug'](chalk[_0x435a8b(0x1bc)](_0x435a8b(0x23a)+_0x5ceddc));try{_0x3f8721[_0x435a8b(0x228)]?.[_0x435a8b(0x1d6)]?await this[_0x435a8b(0x1d0)](_0x3f8721):await this[_0x435a8b(0x257)](_0x3f8721);}catch(_0x1bda52){logger[_0x435a8b(0x1d2)](chalk[_0x435a8b(0x21e)](_0x435a8b(0x24e)+_0x5ceddc+':'),_0x1bda52);}finally{this[_0x435a8b(0x239)](_0x5ceddc);}}}async['handleStatus'](_0x40bd56){const _0x3b3678=_0x4429ab,_0xf6e23e=_0x40bd56[_0x3b3678(0x1cc)][_0x3b3678(0x1c9)]||_0x40bd56[_0x3b3678(0x1cc)][_0x3b3678(0x1b8)],_0x3d92c4=this[_0x3b3678(0x225)](_0x40bd56[_0x3b3678(0x228)]);logger[_0x3b3678(0x1ff)](chalk[_0x3b3678(0x247)](_0x3b3678(0x1f1))),logger['info'](chalk[_0x3b3678(0x1f8)](_0x3b3678(0x1d5)+_0xf6e23e)),logger['info'](chalk[_0x3b3678(0x234)](_0x3b3678(0x23c)+_0x3d92c4)),logger[_0x3b3678(0x1ff)](chalk['white'](_0x3b3678(0x1f3)+Object['keys'](_0x40bd56['message'])[0x0]));try{await this[_0x3b3678(0x1f2)]['readMessages']([_0x40bd56[_0x3b3678(0x1cc)]]),logger[_0x3b3678(0x1ff)](chalk[_0x3b3678(0x1bc)](_0x3b3678(0x1df)));}catch(_0x3c2e79){logger[_0x3b3678(0x1d2)](chalk['red'](_0x3b3678(0x22a)),_0x3c2e79);}}async[_0x4429ab(0x19c)](_0x2d7529){const _0x4cf982=_0x4429ab;logger[_0x4cf982(0x213)](chalk[_0x4cf982(0x1bc)](_0x4cf982(0x208)));for(const _0x18c6a0 of _0x2d7529){try{if(_0x18c6a0[_0x4cf982(0x1cf)]?.[_0x4cf982(0x20b)])await this[_0x4cf982(0x204)](_0x18c6a0[_0x4cf982(0x1cc)][_0x4cf982(0x1b8)],_0x18c6a0[_0x4cf982(0x1cc)]['id']);else _0x18c6a0[_0x4cf982(0x1cf)]?.[_0x4cf982(0x1d6)]?await this[_0x4cf982(0x1d0)](_0x18c6a0):logger[_0x4cf982(0x213)](chalk[_0x4cf982(0x234)](_0x4cf982(0x19e)),JSON[_0x4cf982(0x244)](_0x18c6a0,null,0x2));}catch(_0x4a1a05){logger[_0x4cf982(0x1d2)](chalk[_0x4cf982(0x21e)](_0x4cf982(0x200)),_0x4a1a05);}}}async['handleMessagesDelete'](_0x5136d0){const _0x2093d2=_0x4429ab;logger[_0x2093d2(0x213)](chalk[_0x2093d2(0x1bc)](_0x2093d2(0x206)));if(typeof _0x5136d0===_0x2093d2(0x259)&&_0x5136d0!==null)for(const [_0x13ea3b,_0x26192b]of Object[_0x2093d2(0x1bb)](_0x5136d0)){for(const _0x11d11d of _0x26192b){await this[_0x2093d2(0x204)](_0x13ea3b,_0x11d11d);}}else logger['warn'](chalk[_0x2093d2(0x234)](_0x2093d2(0x21f)));}async[_0x4429ab(0x204)](_0x174577,_0x48683d){const _0x3e6e25=_0x4429ab;logger[_0x3e6e25(0x213)](chalk[_0x3e6e25(0x1bc)]('ðŸ”„\x20Handling\x20deleted\x20message.\x20Chat\x20JID:\x20'+_0x174577+_0x3e6e25(0x24a)+_0x48683d));const _0x471df7=this['getMessageFromStore'](_0x174577,_0x48683d);_0x471df7?await this[_0x3e6e25(0x1fa)](_0x471df7):logger[_0x3e6e25(0x1e0)](chalk[_0x3e6e25(0x234)](_0x3e6e25(0x1d8)+_0x174577+_0x3e6e25(0x24a)+_0x48683d));}async['handleProtocolMessage'](_0x472757){const _0x5a0986=_0x4429ab,_0x19f087=_0x472757['message']?.['protocolMessage']||_0x472757[_0x5a0986(0x1cf)]?.['protocolMessage'];if(!_0x19f087){logger[_0x5a0986(0x1e0)](chalk['yellow'](_0x5a0986(0x1b4)));return;}logger[_0x5a0986(0x213)](chalk['cyan']('ðŸ”„\x20Protocol\x20message\x20type:\x20'+_0x19f087[_0x5a0986(0x1d9)]));if(_0x19f087[_0x5a0986(0x1d9)]===0x0){const _0x56ee50=_0x19f087[_0x5a0986(0x1cc)],_0x2689c4=_0x56ee50[_0x5a0986(0x1b8)]||_0x472757['key'][_0x5a0986(0x1b8)];await this['handleDeletedMessage'](_0x2689c4,_0x56ee50['id']);}else logger[_0x5a0986(0x213)](chalk[_0x5a0986(0x234)](_0x5a0986(0x221)+_0x19f087[_0x5a0986(0x1d9)]));}async[_0x4429ab(0x257)](_0x3ef79f){const _0x298c8d=_0x4429ab,_0x5e9c5c=Object[_0x298c8d(0x1f7)](_0x3ef79f[_0x298c8d(0x228)])[0x0],_0x505f8c=_0x3ef79f[_0x298c8d(0x1cc)][_0x298c8d(0x1b8)],_0x224075=_0x3ef79f[_0x298c8d(0x1cc)][_0x298c8d(0x1c9)]||_0x505f8c,_0x664411=this[_0x298c8d(0x225)](_0x3ef79f[_0x298c8d(0x228)]);this[_0x298c8d(0x1c7)](_0x224075,_0x664411,_0x505f8c,_0x5e9c5c),this[_0x298c8d(0x256)](_0x505f8c,_0x3ef79f),await kordCmdUpsert(this[_0x298c8d(0x1f2)],_0x3ef79f),this['emit']('messageReceived',_0x3ef79f);}async[_0x4429ab(0x1fa)](_0x436b23){const _0x28d809=_0x4429ab;if(!this[_0x28d809(0x254)]){logger[_0x28d809(0x1d2)](chalk[_0x28d809(0x21e)]('âŒ\x20Owner\x20JID\x20not\x20set'));return;}const _0x1586d4=_0x436b23['key'][_0x28d809(0x1c9)]||_0x436b23[_0x28d809(0x1cc)][_0x28d809(0x1b8)],_0x1dc305=_0x436b23[_0x28d809(0x1cc)][_0x28d809(0x1b8)],_0x47498b=this[_0x28d809(0x225)](_0x436b23[_0x28d809(0x228)]);try{const _0x105b67=this[_0x28d809(0x1c3)]();let _0x41f8b3=await this[_0x28d809(0x1ef)](_0x436b23,_0x47498b,_0x1586d4,_0x1dc305,_0x105b67);_0x41f8b3&&(await this[_0x28d809(0x222)](_0x41f8b3,_0x1586d4,_0x1dc305),logger[_0x28d809(0x1ff)](chalk[_0x28d809(0x1f8)](_0x28d809(0x258))));}catch(_0x40ba38){logger[_0x28d809(0x1d2)](chalk[_0x28d809(0x21e)](_0x28d809(0x20f)),_0x40ba38);}}async[_0x4429ab(0x1ef)](_0xd5176d,_0x452dcc,_0x3e1744,_0x4f380b,_0x20130b){const _0x56366c=_0x4429ab;if(this[_0x56366c(0x25a)](_0xd5176d[_0x56366c(0x228)]))return await this[_0x56366c(0x1d1)](_0xd5176d,_0x3e1744,_0x4f380b,_0x20130b);else{if(_0x452dcc)return await this[_0x56366c(0x238)](_0x452dcc,_0x3e1744,_0x4f380b,_0x20130b);}return null;}async[_0x4429ab(0x1d1)](_0x15f9bf,_0x5aa5e0,_0x4e6808,_0x53177c){const _0x3cefc1=_0x4429ab;logger[_0x3cefc1(0x213)](chalk[_0x3cefc1(0x1bc)](_0x3cefc1(0x1a4)));const _0xeb2c90=await this['downloadDeletedMedia'](_0x15f9bf[_0x3cefc1(0x228)]);if(_0xeb2c90){const _0x4868e4=this[_0x3cefc1(0x1cb)](_0x15f9bf[_0x3cefc1(0x228)])||'',_0x4d55b1=Object['keys'](_0xeb2c90)[0x0],_0x2eedef={[_0x4d55b1]:_0xeb2c90[_0x4d55b1],'mimetype':_0xeb2c90['mimetype'],'fileName':_0xeb2c90['fileName'],'caption':'*[DELETED\x20MEDIA]*\x0a\x0a'+_0x4868e4,'contextInfo':{'mentionedJid':[_0x5aa5e0],'quotedMessage':_0x53177c[_0x3cefc1(0x228)],'participant':_0x5aa5e0,'remoteJid':_0x4e6808}},_0x2fdc1b=await this[_0x3cefc1(0x1f2)][_0x3cefc1(0x242)](this[_0x3cefc1(0x254)],_0x2eedef,{'quoted':_0x53177c});return this[_0x3cefc1(0x216)](_0xeb2c90[_0x3cefc1(0x1ad)]),_0x2fdc1b;}return null;}async['sendDeletedTextNotification'](_0x12cd69,_0x1db3d2,_0x4126c6,_0x54fa4b){const _0x3bba31=_0x4429ab,_0x3c88a8={'text':_0x3bba31(0x1a8)+_0x12cd69,'contextInfo':{'mentionedJid':[_0x1db3d2],'quotedMessage':_0x54fa4b[_0x3bba31(0x228)],'participant':_0x1db3d2,'remoteJid':_0x4126c6}};return await this['sock'][_0x3bba31(0x242)](this[_0x3bba31(0x254)],_0x3c88a8,{'quoted':_0x54fa4b});}async[_0x4429ab(0x222)](_0x57e6d5,_0x206390,_0x52216c){const _0x2a5e30=_0x4429ab,_0x1022b0=await this[_0x2a5e30(0x1e5)](_0x52216c),_0x46f0d4=new Date()[_0x2a5e30(0x1a7)](_0x2a5e30(0x1c2),{'timeZone':_0x2a5e30(0x218)}),_0x549fc3=_0x2a5e30(0x1bf)+('*TIME:*\x20'+_0x46f0d4+'\x0a')+(_0x2a5e30(0x237)+_0x1022b0+'\x0a')+(_0x2a5e30(0x1e6)+_0x206390[_0x2a5e30(0x23f)]('@')[0x0]+'\x0a')+(_0x2a5e30(0x1f4)+_0x206390[_0x2a5e30(0x23f)]('@')[0x0]),_0x4143ef={'text':_0x549fc3,'contextInfo':{'mentionedJid':[_0x206390],'participant':_0x206390,'remoteJid':_0x52216c}};await this['sock']['sendMessage'](this[_0x2a5e30(0x254)],_0x4143ef,{'quoted':_0x57e6d5});}[_0x4429ab(0x1c3)](){const _0x7f0168=_0x4429ab;return{'key':{'fromMe':![],'participant':_0x7f0168(0x233),'remoteJid':_0x7f0168(0x1b9)},'message':{'conversation':'*ANTIDELETE\x20DETECTED*'}};}[_0x4429ab(0x225)](_0x270da9){const _0x7798d3=_0x4429ab;if(!_0x270da9)return _0x7798d3(0x202);if(_0x270da9[_0x7798d3(0x1b7)])return _0x270da9[_0x7798d3(0x1b7)];if(_0x270da9['extendedTextMessage'])return _0x270da9[_0x7798d3(0x1b3)][_0x7798d3(0x250)];if(_0x270da9[_0x7798d3(0x20e)])return _0x7798d3(0x19f)+(_0x270da9[_0x7798d3(0x20e)][_0x7798d3(0x1dd)]||'');if(_0x270da9[_0x7798d3(0x1b6)])return _0x7798d3(0x205)+(_0x270da9[_0x7798d3(0x1b6)][_0x7798d3(0x1dd)]||'');if(_0x270da9['audioMessage'])return _0x7798d3(0x1db);if(_0x270da9[_0x7798d3(0x1e8)])return _0x7798d3(0x1ea);if(_0x270da9['documentMessage'])return _0x7798d3(0x1cd)+(_0x270da9[_0x7798d3(0x214)][_0x7798d3(0x1ad)]||'');if(_0x270da9[_0x7798d3(0x1bd)])return'[Contact]';if(_0x270da9[_0x7798d3(0x24d)])return _0x7798d3(0x207);return _0x7798d3(0x202);}[_0x4429ab(0x25a)](_0x47035d){const _0x5d72d8=_0x4429ab;return _0x47035d&&(_0x47035d['imageMessage']||_0x47035d['videoMessage']||_0x47035d[_0x5d72d8(0x230)]||_0x47035d['stickerMessage']||_0x47035d[_0x5d72d8(0x214)]);}['storeMessage'](_0x149533,_0x275465){const _0x109cf8=_0x4429ab;!this[_0x109cf8(0x1eb)]['has'](_0x149533)&&this[_0x109cf8(0x1eb)][_0x109cf8(0x1d4)](_0x149533,[]);const _0x55ea15=this[_0x109cf8(0x1eb)][_0x109cf8(0x1ed)](_0x149533);_0x55ea15[_0x109cf8(0x1fb)](_0x275465),_0x55ea15[_0x109cf8(0x229)]>this['storeCapacity']&&_0x55ea15[_0x109cf8(0x1c0)](0x0,_0x55ea15[_0x109cf8(0x229)]-this[_0x109cf8(0x245)]);}['getMessageFromStore'](_0x3541eb,_0xf820e1){const _0x340913=_0x4429ab;if(this[_0x340913(0x1eb)][_0x340913(0x232)](_0x3541eb)){const _0x193063=this['messageStore'][_0x340913(0x1ed)](_0x3541eb);return _0x193063['find'](_0x5c5e59=>_0x5c5e59[_0x340913(0x1cc)]['id']===_0xf820e1);}return null;}['startPeriodicCleanup'](){setInterval(()=>{const _0x37941d=_0x4458;this[_0x37941d(0x20c)](),this[_0x37941d(0x219)]();},0x36ee80);}[_0x4429ab(0x20c)](){const _0x1e676d=_0x4429ab,_0x21daf2=Date[_0x1e676d(0x246)]();for(const _0x318520 of this['processedMessages']){_0x21daf2-parseInt(_0x318520['split']('_')[0x0])>0x36ee80&&this[_0x1e676d(0x1a3)][_0x1e676d(0x209)](_0x318520);}logger['debug'](chalk['cyan']('ðŸ§¹\x20Cleaned\x20up\x20processed\x20messages.\x20Current\x20count:\x20'+this[_0x1e676d(0x1a3)][_0x1e676d(0x1ec)]));}['cleanupMessageStore'](){const _0x28986c=_0x4429ab;for(const [_0x592a6f,_0x2399ba]of this[_0x28986c(0x1eb)]){_0x2399ba[_0x28986c(0x229)]>this[_0x28986c(0x245)]&&this[_0x28986c(0x1eb)]['set'](_0x592a6f,_0x2399ba[_0x28986c(0x1b1)](-this[_0x28986c(0x245)]));}logger[_0x28986c(0x213)](chalk['cyan'](_0x28986c(0x1e9)+this['messageStore'][_0x28986c(0x1ec)]+_0x28986c(0x1c6)));}[_0x4429ab(0x239)](_0x3e8fbd){setTimeout(()=>{const _0x330dc3=_0x4458;this[_0x330dc3(0x1a3)]['delete'](_0x3e8fbd),logger['debug'](chalk[_0x330dc3(0x1bc)]('ðŸ—‘ï¸\x20Removed\x20'+_0x3e8fbd+_0x330dc3(0x23b)));},0x493e0);}[_0x4429ab(0x216)](_0x28e337){const _0x2b3e46=_0x4429ab;setTimeout(async()=>{const _0x452ad5=_0x4458;try{await fs[_0x452ad5(0x1fe)](this[_0x452ad5(0x1d7)]+'/'+_0x28e337),logger['info'](chalk[_0x452ad5(0x1f8)](_0x452ad5(0x210)+_0x28e337));}catch(_0x435b85){logger[_0x452ad5(0x1d2)](chalk[_0x452ad5(0x21e)](_0x452ad5(0x21d)+_0x28e337+':'),_0x435b85);}},this[_0x2b3e46(0x1d3)]);}['logMessageInfo'](_0x3af117,_0x22a9fa,_0x48c406,_0x56f38b){const _0xdc65aa=_0x4429ab;logger[_0xdc65aa(0x1ff)](chalk['magenta']('ðŸ“©\x20New\x20message\x20received:')),logger[_0xdc65aa(0x1ff)](chalk[_0xdc65aa(0x1c4)](_0xdc65aa(0x1a5)+_0x3af117)),logger[_0xdc65aa(0x1ff)](chalk[_0xdc65aa(0x1f8)](_0xdc65aa(0x1e2)+_0x22a9fa)),logger[_0xdc65aa(0x1ff)](chalk[_0xdc65aa(0x234)](_0xdc65aa(0x1b5)+_0x48c406)),logger['info'](chalk[_0xdc65aa(0x1bc)](_0xdc65aa(0x22e)+_0x56f38b));}[_0x4429ab(0x1cb)](_0x470767){const _0x1f2335=_0x4429ab;if(!_0x470767)return logger[_0x1f2335(0x213)](chalk[_0x1f2335(0x234)](_0x1f2335(0x22f))),null;const _0x3e248f=['imageMessage',_0x1f2335(0x1b6),'documentMessage',_0x1f2335(0x1e8)];for(const _0x28576f of _0x3e248f){if(_0x470767[_0x28576f]&&_0x470767[_0x28576f]['caption'])return logger[_0x1f2335(0x213)](chalk[_0x1f2335(0x1bc)]('ðŸ”\x20getOriginalCaption:\x20Found\x20caption\x20in\x20'+_0x28576f)),_0x470767[_0x28576f][_0x1f2335(0x1dd)];}if(_0x470767[_0x1f2335(0x1b3)]&&_0x470767['extendedTextMessage'][_0x1f2335(0x250)])return logger[_0x1f2335(0x213)](chalk[_0x1f2335(0x1bc)]('ðŸ”\x20getOriginalCaption:\x20Found\x20caption\x20in\x20extendedTextMessage')),_0x470767[_0x1f2335(0x1b3)][_0x1f2335(0x250)];return logger['debug'](chalk[_0x1f2335(0x234)](_0x1f2335(0x241))),null;}async[_0x4429ab(0x1c8)](_0xbc5147){const _0xe3afc=_0x4429ab;if(!_0xbc5147)return logger['error'](chalk[_0xe3afc(0x21e)](_0xe3afc(0x21a))),null;const _0x217565=this[_0xe3afc(0x22d)](_0xbc5147);if(!_0x217565)return null;try{const _0x543e49=_0xbc5147[_0x217565];if(!_0x543e49)return logger[_0xe3afc(0x1d2)](chalk[_0xe3afc(0x21e)](_0xe3afc(0x224)+_0x217565+'\x20is\x20undefined')),null;const _0x523a35=await downloadContentFromMessage(_0x543e49,_0x217565[_0xe3afc(0x255)](_0xe3afc(0x1dc),'')),_0xbb237d=await this['streamToBuffer'](_0x523a35),_0x713b8e=_0x543e49['mimetype']||_0xe3afc(0x24f),_0x31f5f1=_0x543e49[_0xe3afc(0x1ad)]||_0xe3afc(0x21b)+_0x217565+'_'+Date[_0xe3afc(0x246)]()+'.'+_0x713b8e['split']('/')[0x1];return{[_0x217565[_0xe3afc(0x255)](_0xe3afc(0x1dc),'')]:_0xbb237d,'mimetype':_0x713b8e,'fileName':_0x31f5f1};}catch(_0x127037){return logger['error'](chalk[_0xe3afc(0x21e)]('âŒ\x20Error\x20downloading\x20deleted\x20media:'),_0x127037),null;}}['getMediaType'](_0x4c89dc){const _0x1791de=_0x4429ab;if(!_0x4c89dc)return null;const _0x575c4f=[_0x1791de(0x20e),_0x1791de(0x1b6),'audioMessage',_0x1791de(0x1e8),'documentMessage'];return _0x575c4f[_0x1791de(0x235)](_0x26f80b=>_0x4c89dc[_0x26f80b]);}async['streamToBuffer'](_0x87b6f){const _0x11f52c=[];for await(const _0x4d62ba of _0x87b6f){_0x11f52c['push'](_0x4d62ba);}return Buffer['concat'](_0x11f52c);}async[_0x4429ab(0x1e5)](_0x17ca92){const _0x2afe6a=_0x4429ab;try{if(_0x17ca92['endsWith'](_0x2afe6a(0x201))){const _0x1a2562=await this[_0x2afe6a(0x1f2)][_0x2afe6a(0x1f6)](_0x17ca92);return _0x1a2562[_0x2afe6a(0x1fc)];}else{const _0x5ba524=await this[_0x2afe6a(0x1f2)][_0x2afe6a(0x1a0)](_0x17ca92);return _0x5ba524[_0x2afe6a(0x1a2)]||_0x5ba524[_0x2afe6a(0x231)]||_0x17ca92['split']('@')[0x0];}}catch(_0x4c8233){return logger[_0x2afe6a(0x1d2)](chalk[_0x2afe6a(0x21e)](_0x2afe6a(0x1ee)),_0x4c8233),_0x17ca92[_0x2afe6a(0x23f)]('@')[0x0];}}[_0x4429ab(0x1f5)](){const _0x2ea367=_0x4429ab,_0x1cd324=global[_0x2ea367(0x1b2)]?.[_0x2ea367(0x1ce)];if(!_0x1cd324){logger[_0x2ea367(0x1d2)](chalk[_0x2ea367(0x21e)](_0x2ea367(0x217)));return;}this[_0x2ea367(0x254)]=_0x1cd324+_0x2ea367(0x1f0);}[_0x4429ab(0x23e)](_0x286b4c){const _0x271653=_0x4429ab;if(!_0x286b4c||!_0x286b4c[_0x271653(0x228)])return logger[_0x271653(0x213)](chalk['yellow'](_0x271653(0x249))),![];if(!_0x286b4c['key']?.['id'])return logger[_0x271653(0x213)](chalk[_0x271653(0x234)]('âš ï¸\x20Skipping\x20message\x20with\x20no\x20ID')),![];return!![];}}function initializeKordEvents(_0x5906d0){const _0x529a22=_0x4429ab,_0x587f44=new KordEventsManager(_0x5906d0);_0x587f44[_0x529a22(0x21c)]()[_0x529a22(0x1de)](_0x5e6c52=>{const _0x50da2f=_0x529a22;console[_0x50da2f(0x1d2)](chalk['red']('âŒ\x20Failed\x20to\x20initialize\x20KordEventsManager:'),_0x5e6c52);}),_0x587f44['on'](_0x529a22(0x1d2),({event:_0x58ec76,error:_0x21b4db,args:_0x3d4fd6})=>{const _0x28f08e=_0x529a22;logger[_0x28f08e(0x1d2)](chalk[_0x28f08e(0x21e)](_0x28f08e(0x1a6)+_0x58ec76+':'),_0x21b4db),_0x587f44[_0x28f08e(0x223)]&&logger[_0x28f08e(0x213)](chalk[_0x28f08e(0x24b)](_0x28f08e(0x22c)),JSON['stringify'](_0x3d4fd6,null,0x2));});}module[_0x4429ab(0x1f9)]={'KordEventsManager':KordEventsManager,'initializeKordEvents':initializeKordEvents};