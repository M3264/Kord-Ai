const a0_0xc92acf=a0_0x4c16;function a0_0x4c16(_0x1ef034,_0x1f3dd3){const _0x5d5388=a0_0x5d53();return a0_0x4c16=function(_0x4c1624,_0x5d4f49){_0x4c1624=_0x4c1624-0x1ad;let _0x6a1b1e=_0x5d5388[_0x4c1624];return _0x6a1b1e;},a0_0x4c16(_0x1ef034,_0x1f3dd3);}(function(_0x1fb45c,_0x311461){const _0x1ae8a9=a0_0x4c16,_0x224447=_0x1fb45c();while(!![]){try{const _0x217b9e=-parseInt(_0x1ae8a9(0x1d0))/0x1+-parseInt(_0x1ae8a9(0x213))/0x2+-parseInt(_0x1ae8a9(0x200))/0x3*(parseInt(_0x1ae8a9(0x1cf))/0x4)+-parseInt(_0x1ae8a9(0x1da))/0x5*(-parseInt(_0x1ae8a9(0x202))/0x6)+-parseInt(_0x1ae8a9(0x214))/0x7+-parseInt(_0x1ae8a9(0x21c))/0x8*(-parseInt(_0x1ae8a9(0x1ee))/0x9)+parseInt(_0x1ae8a9(0x1e1))/0xa;if(_0x217b9e===_0x311461)break;else _0x224447['push'](_0x224447['shift']());}catch(_0x2d1634){_0x224447['push'](_0x224447['shift']());}}}(a0_0x5d53,0x3f1bc));const {EventEmitter}=require(a0_0xc92acf(0x20e)),fs=require('fs')[a0_0xc92acf(0x1b7)],fss=require('fs'),logger=require(a0_0xc92acf(0x201)),chalk=require('chalk'),path=require('path'),{MediaUtils}=require(a0_0xc92acf(0x1ef)),{kordCmdUpsert}=require('./kordCmd'),settings=require(a0_0xc92acf(0x1e4)),{jidNormalizedUser}=require(a0_0xc92acf(0x210));class KordEventsManager extends EventEmitter{constructor(_0x360f32){const _0x49e0d7=a0_0xc92acf;super(),this[_0x49e0d7(0x1f7)]=_0x360f32,this['processedMessages']=new Set(),this['mediaUtils']=new MediaUtils(_0x360f32),this['debugMode']=process[_0x49e0d7(0x206)]['DEBUG_MODE']==='true';const _0x5d837c=global[_0x49e0d7(0x21f)]?.['OWNER_NUMBERS'];this['ownerJid']=_0x5d837c+'@s.whatsapp.net';}async[a0_0xc92acf(0x1c9)](){const _0x23b2bc=a0_0xc92acf;try{await this[_0x23b2bc(0x1e0)]['setup'](),this['initializeEventListeners'](),this['startPeriodicCleanup'](),logger[_0x23b2bc(0x1fd)](chalk[_0x23b2bc(0x225)](_0x23b2bc(0x1f5)));}catch(_0x517cec){logger[_0x23b2bc(0x1c5)](chalk[_0x23b2bc(0x1ba)](_0x23b2bc(0x1c8)),_0x517cec);throw _0x517cec;}}['initializeEventListeners'](){const _0x533480=a0_0xc92acf,_0x15f69c=[_0x533480(0x1c2),'messages.update',_0x533480(0x1ec)];_0x15f69c[_0x533480(0x1bb)](_0x2c09f1=>{const _0x13e230=_0x533480;this['sock']['ev']['on'](_0x2c09f1,(..._0x2f10e6)=>this[_0x13e230(0x20a)](_0x2c09f1,..._0x2f10e6));}),logger['info'](chalk[_0x533480(0x1f6)](_0x533480(0x1d8)));}async[a0_0xc92acf(0x20a)](_0x5cc116,..._0xee5b5){const _0x3d144b=a0_0xc92acf;try{logger['debug'](chalk[_0x3d144b(0x1fe)]('ðŸ”„\x20Handling\x20event:\x20'+_0x5cc116));this[_0x3d144b(0x1ca)]&&logger[_0x3d144b(0x1f2)](chalk['gray'](_0x3d144b(0x1e6)),JSON['stringify'](_0xee5b5,null,0x2));switch(_0x5cc116){case _0x3d144b(0x1c2):await this[_0x3d144b(0x222)](..._0xee5b5);break;case _0x3d144b(0x1dc):await this[_0x3d144b(0x207)](..._0xee5b5);break;case'messages.delete':await this[_0x3d144b(0x1bc)](..._0xee5b5);break;default:logger[_0x3d144b(0x1f2)](chalk['yellow'](_0x3d144b(0x1d2)+_0x5cc116));break;}}catch(_0x5dc101){logger[_0x3d144b(0x1c5)](chalk[_0x3d144b(0x1ba)](_0x3d144b(0x1b5)+_0x5cc116+'\x20event:'),_0x5dc101),this['emit'](_0x3d144b(0x1c5),{'event':_0x5cc116,'error':_0x5dc101,'args':_0xee5b5});}}async[a0_0xc92acf(0x222)]({messages:_0x408c82,type:_0x12c287}){const _0x368594=a0_0xc92acf;logger[_0x368594(0x1f2)](chalk[_0x368594(0x1fe)](_0x368594(0x1df)+_0x12c287+')'));for(const _0x2a8d9c of _0x408c82){if(!this[_0x368594(0x212)](_0x2a8d9c))continue;const _0x106b50=_0x2a8d9c[_0x368594(0x1ea)]?.['id'],_0x11d7e7=_0x2a8d9c['key'][_0x368594(0x1e8)];if(_0x11d7e7===_0x368594(0x1bf)){await this['handleStatus'](_0x2a8d9c);continue;}if(this[_0x368594(0x20c)][_0x368594(0x1ff)](_0x106b50)){logger[_0x368594(0x1f2)](chalk[_0x368594(0x1ad)]('ðŸ”\x20Message\x20'+_0x106b50+_0x368594(0x1be)));continue;}this[_0x368594(0x20c)][_0x368594(0x1e7)](_0x106b50),logger['debug'](chalk['cyan'](_0x368594(0x1d7)+_0x106b50));try{await this[_0x368594(0x1cc)](_0x2a8d9c);}catch(_0x31d29e){logger[_0x368594(0x1c5)](chalk[_0x368594(0x1ba)]('âŒ\x20Error\x20processing\x20message\x20'+_0x106b50+':'),_0x31d29e);}finally{this[_0x368594(0x1c1)](_0x106b50);}}}async[a0_0xc92acf(0x207)](_0x2875e4){const _0x3e5169=a0_0xc92acf;logger['debug'](chalk[_0x3e5169(0x1fe)](_0x3e5169(0x209)));}async[a0_0xc92acf(0x1bc)](_0x47378f){const _0x5587dc=a0_0xc92acf;logger[_0x5587dc(0x1f2)](chalk[_0x5587dc(0x1fe)]('ðŸ”„\x20Handling\x20messages.delete\x20event'));}async[a0_0xc92acf(0x1cc)](_0xf552fd){const _0x1e55fc=a0_0xc92acf,_0x4f27b6=Object[_0x1e55fc(0x1b4)](_0xf552fd[_0x1e55fc(0x1ae)])[0x0],_0x170c5a=_0xf552fd[_0x1e55fc(0x1ea)][_0x1e55fc(0x1e8)],_0x759122=_0xf552fd[_0x1e55fc(0x1ea)][_0x1e55fc(0x21a)]||_0x170c5a,_0x4cf855=this[_0x1e55fc(0x21e)](_0xf552fd[_0x1e55fc(0x1ae)]);this['logMessageInfo'](_0x759122,_0x4cf855,_0x170c5a,_0x4f27b6);const _0x4cc4f7=[_0x1e55fc(0x219),_0x1e55fc(0x1b6),_0x1e55fc(0x215),'send',_0x1e55fc(0x1f0)];_0x4cc4f7['some'](_0x75f75b=>_0x4cf855['toLowerCase']()[_0x1e55fc(0x1e2)](_0x75f75b))&&await this[_0x1e55fc(0x1e0)][_0x1e55fc(0x1e5)](_0xf552fd),global['settings']?.[_0x1e55fc(0x21d)]&&this[_0x1e55fc(0x1e0)][_0x1e55fc(0x203)](_0xf552fd)&&!this['mediaUtils'][_0x1e55fc(0x1d1)][_0x1e55fc(0x1ff)](_0xf552fd['key']['id'])&&_0x759122!==this['ownerJid']&&_0x170c5a!==this[_0x1e55fc(0x1b3)]&&await this[_0x1e55fc(0x1e0)]['handleViewOnceMessage'](_0xf552fd),await kordCmdUpsert(this[_0x1e55fc(0x1f7)],_0xf552fd),this[_0x1e55fc(0x220)]('messageReceived',_0xf552fd);}[a0_0xc92acf(0x21e)](_0x338090){const _0x159942=a0_0xc92acf;if(!_0x338090)return _0x159942(0x1eb);if(_0x338090[_0x159942(0x1d4)])return _0x338090['conversation'];if(_0x338090[_0x159942(0x226)])return _0x338090[_0x159942(0x226)][_0x159942(0x217)];if(_0x338090['imageMessage'])return'[Image]\x20'+(_0x338090[_0x159942(0x216)][_0x159942(0x1dd)]||'');if(_0x338090[_0x159942(0x221)])return _0x159942(0x1b8)+(_0x338090[_0x159942(0x221)]['caption']||'');if(_0x338090[_0x159942(0x20f)])return'[Audio]';if(_0x338090[_0x159942(0x1fa)])return'[Sticker]';if(_0x338090['documentMessage'])return _0x159942(0x1c7)+(_0x338090['documentMessage']['fileName']||'');if(_0x338090[_0x159942(0x1de)])return _0x159942(0x1b1);if(_0x338090[_0x159942(0x1b2)])return _0x159942(0x211);return _0x159942(0x1eb);}[a0_0xc92acf(0x212)](_0x1e1af3){const _0x3b50b5=a0_0xc92acf;return _0x1e1af3&&_0x1e1af3['message']&&_0x1e1af3[_0x3b50b5(0x1ea)]?.['id'];}async[a0_0xc92acf(0x218)](_0x3c5b23){const _0x2f49eb=a0_0xc92acf,_0x98221a=_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x21a)]||_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x1e8)],_0x398f09=this[_0x2f49eb(0x21e)](_0x3c5b23[_0x2f49eb(0x1ae)]);logger[_0x2f49eb(0x1fd)](chalk[_0x2f49eb(0x1c6)]('||==========KORD-AI=========||:')),logger[_0x2f49eb(0x1fd)](chalk[_0x2f49eb(0x1c6)](_0x2f49eb(0x1cd))),logger['info'](chalk[_0x2f49eb(0x225)](_0x2f49eb(0x1d9)+_0x98221a)),logger[_0x2f49eb(0x1fd)](chalk[_0x2f49eb(0x204)]('ðŸ’¬\x20Status\x20Content:\x20'+_0x398f09)),logger[_0x2f49eb(0x1fd)](chalk[_0x2f49eb(0x1b9)](_0x2f49eb(0x1c0)+Object[_0x2f49eb(0x1b4)](_0x3c5b23[_0x2f49eb(0x1ae)])[0x0]));try{if(global[_0x2f49eb(0x21f)][_0x2f49eb(0x20b)]&&_0x3c5b23[_0x2f49eb(0x1ea)]){const _0x4d4c2d=await jidNormalizedUser(this[_0x2f49eb(0x1f7)][_0x2f49eb(0x208)]['id']);await this[_0x2f49eb(0x1f7)][_0x2f49eb(0x205)]([_0x3c5b23[_0x2f49eb(0x1ea)],_0x4d4c2d]);}if(global[_0x2f49eb(0x21f)][_0x2f49eb(0x1f1)]){const _0x5446a8=await jidNormalizedUser(this[_0x2f49eb(0x1f7)][_0x2f49eb(0x208)]['id']),_0x2bb200=global['settings'][_0x2f49eb(0x1d6)]||'âœ¨';_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x1e8)]&&_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x21a)]&&(await this[_0x2f49eb(0x1f7)][_0x2f49eb(0x1fc)](_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x1e8)],{'react':{'key':_0x3c5b23[_0x2f49eb(0x1ea)],'text':_0x2bb200}},{'statusJidList':[_0x3c5b23[_0x2f49eb(0x1ea)][_0x2f49eb(0x21a)],_0x5446a8]}),logger['info'](chalk[_0x2f49eb(0x225)](_0x2f49eb(0x1e9)+_0x2bb200)));}}catch(_0x542b8d){logger[_0x2f49eb(0x1c5)](chalk[_0x2f49eb(0x1ba)](_0x2f49eb(0x223)),_0x542b8d);}}[a0_0xc92acf(0x1cb)](_0x47d94d,_0x48582c,_0x2f8d36,_0x9456af){const _0xce32cd=a0_0xc92acf;logger['info'](chalk[_0xce32cd(0x1f6)](_0xce32cd(0x1ce))),logger[_0xce32cd(0x1fd)](chalk['magenta'](_0xce32cd(0x224))),logger[_0xce32cd(0x1fd)](chalk[_0xce32cd(0x1f6)]('ðŸ‘¤\x20User\x20JID:\x20'+_0x47d94d)),logger[_0xce32cd(0x1fd)](chalk[_0xce32cd(0x225)](_0xce32cd(0x1ed)+_0x48582c)),logger[_0xce32cd(0x1fd)](chalk[_0xce32cd(0x204)](_0xce32cd(0x1e3)+_0x2f8d36)),logger['info'](chalk[_0xce32cd(0x1fe)](_0xce32cd(0x1af)+_0x9456af));}[a0_0xc92acf(0x1d3)](){setInterval(()=>{const _0x3650bb=a0_0x4c16;this[_0x3650bb(0x21b)](),this['mediaUtils']['clearProcessedStatusDownloads'](),this[_0x3650bb(0x1e0)][_0x3650bb(0x1fb)]();},0x36ee80);}['cleanupProcessedMessages'](){const _0x2f25e4=a0_0xc92acf,_0x30bdb7=Date['now']();for(const _0xd48bf6 of this[_0x2f25e4(0x20c)]){_0x30bdb7-parseInt(_0xd48bf6[_0x2f25e4(0x1f9)]('_')[0x0])>0x36ee80&&this[_0x2f25e4(0x20c)]['delete'](_0xd48bf6);}logger[_0x2f25e4(0x1f2)](chalk[_0x2f25e4(0x1fe)](_0x2f25e4(0x1db)+this['processedMessages'][_0x2f25e4(0x1d5)]));}[a0_0xc92acf(0x1c1)](_0x2ccc6f){setTimeout(()=>{const _0x57fb6f=a0_0x4c16;this[_0x57fb6f(0x20c)]['delete'](_0x2ccc6f),logger[_0x57fb6f(0x1f2)](chalk[_0x57fb6f(0x1fe)]('ðŸ—‘ï¸\x20Removed\x20'+_0x2ccc6f+'\x20from\x20processed\x20messages'));},0x493e0);}}function initializeKordEvents(_0x42e78e){const _0x8edcaf=a0_0xc92acf,_0x6d1669=new KordEventsManager(_0x42e78e);return _0x6d1669[_0x8edcaf(0x1c9)]()[_0x8edcaf(0x1f8)](_0x32cddb=>{const _0x5b778f=_0x8edcaf;console['error'](chalk['red'](_0x5b778f(0x1f3)),_0x32cddb);}),_0x6d1669['on']('error',({event:_0x1877ee,error:_0x3fafc2,args:_0x243af9})=>{const _0x3532d3=_0x8edcaf;logger[_0x3532d3(0x1c5)](chalk[_0x3532d3(0x1ba)](_0x3532d3(0x1bd)+_0x1877ee+':'),_0x3fafc2);}),_0x6d1669;}module['exports']={'KordEventsManager':KordEventsManager,'initializeKordEvents':initializeKordEvents};let file=require[a0_0xc92acf(0x1c3)](__filename);function a0_0x5d53(){const _0x5f0fae=['sock','catch','split','stickerMessage','clearProcessedViewOnceMessages','sendMessage','info','cyan','has','662478JxGfXn','./kordlogger','2874uZTjvK','isViewOnceMessage','yellow','readMessages','env','handleMessagesUpdate','user','ðŸ”„\x20Handling\x20messages.update\x20event','handleEvent','AUTO_READ_STATUS','processedMessages','unwatchFile','events','audioMessage','@whiskeysockets/baileys','[Location]','isValidMessage','924970ndcPhv','3115399CLfkhI','status','imageMessage','text','handleStatus','save','participant','cleanupProcessedMessages','8Jglcyn','ANTI_VIEWONCE','getMessageContent','settings','emit','videoMessage','handleMessagesUpsert','âŒ\x20Error\x20processing\x20status\x20actions:','ðŸ“©\x20New\x20message\x20received:','green','extendedTextMessage','gray','message','ðŸ·ï¸\x20Message\x20Type:\x20','log','[Contact]','locationMessage','ownerJid','keys','âŒ\x20Error\x20handling\x20','download','promises','[Video]\x20','white','red','forEach','handleMessagesDelete','âŒ\x20Error\x20in\x20event\x20','\x20already\x20processed,\x20skipping.','status@broadcast','ðŸ·ï¸\x20Status\x20Type:\x20','scheduleMessageCleanup','messages.upsert','resolve','Update\x20','error','magenta','[Document]\x20','âŒ\x20Error\x20initializing\x20KordEventsManager:','initialize','debugMode','logMessageInfo','processNormalMessage','ðŸ“Š\x20New\x20status\x20update\x20received:','||==========KORD-AI=========||:','4VNHzTe','315380Getyvk','processedViewOnceMessages','âš ï¸\x20Unhandled\x20event:\x20','startPeriodicCleanup','conversation','size','AUTO_LIKE_EMOJI','ðŸ”„\x20Processing\x20message\x20','ðŸ‘‚\x20Baileys\x20event\x20listeners\x20initialized.','ðŸ‘¤\x20Sender\x20JID:\x20','3475Oupqql','ðŸ§¹\x20Cleaned\x20up\x20processed\x20messages.\x20Current\x20count:\x20','messages.update','caption','contactMessage','ðŸ”„\x20Handling\x20messages.upsert\x20(','mediaUtils','9733340TOmTTF','includes','ðŸ—¨ï¸\x20Chat\x20JID:\x20','../../Config.js','handlePotentialStatusDownload','ðŸ“Š\x20Event\x20args:','add','remoteJid','âœ…\x20Status\x20auto-liked\x20with\x20emoji:\x20','key','[Unknown\x20Message\x20Type]','messages.delete','ðŸ’¬\x20Message:\x20','3564009rhHebW','./mediaUtils','take','AUTO_LIKE_STATUS','debug','âŒ\x20Failed\x20to\x20initialize\x20KordEventsManager:','cache','âœ…\x20KordEventsManager\x20initialized\x20successfully.','blue'];a0_0x5d53=function(){return _0x5f0fae;};return a0_0x5d53();}fss['watchFile'](file,()=>{const _0x317c90=a0_0xc92acf;fss[_0x317c90(0x20d)](file),console[_0x317c90(0x1b0)](chalk['redBright'](_0x317c90(0x1c4)+__filename)),delete require[_0x317c90(0x1f4)][file],require(file);});