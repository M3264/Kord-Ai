const _0x585dcb=_0x492e;(function(_0x951d84,_0x511213){const _0x1c4b31=_0x492e,_0x24a34e=_0x951d84();while(!![]){try{const _0x5cbc49=-parseInt(_0x1c4b31(0x91))/0x1+-parseInt(_0x1c4b31(0x93))/0x2+-parseInt(_0x1c4b31(0xcf))/0x3*(-parseInt(_0x1c4b31(0x77))/0x4)+-parseInt(_0x1c4b31(0xb1))/0x5*(parseInt(_0x1c4b31(0xb6))/0x6)+parseInt(_0x1c4b31(0xae))/0x7*(parseInt(_0x1c4b31(0xdc))/0x8)+-parseInt(_0x1c4b31(0xa9))/0x9*(-parseInt(_0x1c4b31(0x8a))/0xa)+parseInt(_0x1c4b31(0xcb))/0xb;if(_0x5cbc49===_0x511213)break;else _0x24a34e['push'](_0x24a34e['shift']());}catch(_0x55f622){_0x24a34e['push'](_0x24a34e['shift']());}}}(_0x90f9,0xa538b));function _0x492e(_0x43fd2b,_0x37897b){const _0x90f932=_0x90f9();return _0x492e=function(_0x492ea9,_0x24c151){_0x492ea9=_0x492ea9-0x77;let _0x591a93=_0x90f932[_0x492ea9];return _0x591a93;},_0x492e(_0x43fd2b,_0x37897b);}function _0x90f9(){const _0x508b59=['âŒ\x20Error\x20in\x20event\x20','âš ï¸\x20Skipping\x20message\x20with\x20no\x20content','true','status@broadcast','text','4294292USbLfX','âœ…\x20Status\x20marked\x20as\x20read','âŒ\x20Error\x20marking\x20status\x20as\x20read:','env','conversation','ðŸ”„\x20Handling\x20messages.upsert\x20(','blue','cyan','cleanupProcessedMessages','messageReceived','yellow','promises','key','now','ðŸ”„\x20Handling\x20event:\x20','getMessageContent','locationMessage','participant','catch','1701610LomCmc','debug','stringify','âŒ\x20Error\x20processing\x20message\x20','unwatchFile','contactMessage','white','158236uJYwTk','handleStatus','1937826LLqoJe','red','chalk','startPeriodicCleanup','ðŸ”„\x20Handling\x20messages.update\x20event','forEach','processedMessages','green','ðŸ“©\x20New\x20message\x20received:','âŒ\x20Failed\x20to\x20initialize\x20KordEventsManager:','ðŸ·ï¸\x20Status\x20Type:\x20','ðŸ§¹\x20Cleaned\x20up\x20processed\x20messages.\x20Current\x20count:\x20','ðŸ’¬\x20Message:\x20','[Image]\x20','scheduleMessageCleanup','[Location]','error','ðŸ”„\x20Handling\x20messages.delete\x20event','keys','videoMessage','documentMessage','ðŸ”„\x20Processing\x20message\x20','9sLkpUG','add','Update\x20','DEBUG_MODE','audioMessage','1383886TcLXis','imageMessage','watchFile','35BvnNnJ','extendedTextMessage','ðŸ’¬\x20Status\x20Content:\x20','handleEvent','magenta','473766ezAckk','log','\x20from\x20processed\x20messages','info','âŒ\x20Error\x20handling\x20','delete','ðŸ—¨ï¸\x20Chat\x20JID:\x20','message','handleMessagesUpsert','processNormalMessage','events','has','ðŸ—‘ï¸\x20Removed\x20','ðŸ”\x20Message\x20','remoteJid','gray','\x20already\x20processed,\x20skipping.','initialize','[Video]\x20','debugMode','\x20event:','10067101ZTKxUz','handleMessagesUpdate','ðŸ“Š\x20Event\x20args:','caption','3wgeATH','emit','messages.update','[Document]\x20','readMessages','ðŸ‘‚\x20Baileys\x20event\x20listeners\x20initialized.','messages.delete','[Audio]','initializeEventListeners','âœ…\x20KordEventsManager\x20initialized\x20successfully.','isValidMessage','fileName','[Unknown\x20Message\x20Type]','8OLoncn','handleMessagesDelete','sock','./kordlogger','messages.upsert'];_0x90f9=function(){return _0x508b59;};return _0x90f9();}const {EventEmitter}=require(_0x585dcb(0xc0)),fs=require('fs')[_0x585dcb(0x82)],fss=require('fs'),logger=require(_0x585dcb(0xdf)),chalk=require(_0x585dcb(0x95)),path=require('path'),{kordCmdUpsert}=require('./kordCmd');class KordEventsManager extends EventEmitter{constructor(_0x1d6ce3){const _0x5d6bfe=_0x585dcb;super(),this[_0x5d6bfe(0xde)]=_0x1d6ce3,this[_0x5d6bfe(0x99)]=new Set(),this[_0x5d6bfe(0xc9)]=process[_0x5d6bfe(0x7a)][_0x5d6bfe(0xac)]===_0x5d6bfe(0xe3);}async[_0x585dcb(0xc7)](){const _0x176bc6=_0x585dcb;try{this[_0x176bc6(0xd7)](),this[_0x176bc6(0x96)](),logger['info'](chalk[_0x176bc6(0x9a)](_0x176bc6(0xd8)));}catch(_0x2f0b63){logger['error'](chalk[_0x176bc6(0x94)]('âŒ\x20Error\x20initializing\x20KordEventsManager:'),_0x2f0b63);throw _0x2f0b63;}}['initializeEventListeners'](){const _0x56044a=_0x585dcb,_0x175321=[_0x56044a(0xe0),_0x56044a(0xd1),'messages.delete'];_0x175321[_0x56044a(0x98)](_0xc09b38=>{const _0x1087e2=_0x56044a;this['sock']['ev']['on'](_0xc09b38,(..._0xeb7237)=>this[_0x1087e2(0xb4)](_0xc09b38,..._0xeb7237));}),logger[_0x56044a(0xb9)](chalk[_0x56044a(0x7d)](_0x56044a(0xd4)));}async['handleEvent'](_0x3dfc0f,..._0x3e3755){const _0x230473=_0x585dcb;try{logger[_0x230473(0x8b)](chalk['cyan'](_0x230473(0x85)+_0x3dfc0f));this['debugMode']&&logger['debug'](chalk[_0x230473(0xc5)](_0x230473(0xcd)),JSON[_0x230473(0x8c)](_0x3e3755,null,0x2));switch(_0x3dfc0f){case'messages.upsert':await this[_0x230473(0xbe)](..._0x3e3755);break;case'messages.update':await this[_0x230473(0xcc)](..._0x3e3755);break;case _0x230473(0xd5):await this[_0x230473(0xdd)](..._0x3e3755);break;default:logger[_0x230473(0x8b)](chalk['yellow']('âš ï¸\x20Unhandled\x20event:\x20'+_0x3dfc0f));break;}}catch(_0x4fc076){logger[_0x230473(0xa3)](chalk[_0x230473(0x94)](_0x230473(0xba)+_0x3dfc0f+_0x230473(0xca)),_0x4fc076),this[_0x230473(0xd0)](_0x230473(0xa3),{'event':_0x3dfc0f,'error':_0x4fc076,'args':_0x3e3755});}}async[_0x585dcb(0xbe)]({messages:_0x4d4636,type:_0x4e6f3a}){const _0xdd135d=_0x585dcb;logger['debug'](chalk[_0xdd135d(0x7e)](_0xdd135d(0x7c)+_0x4e6f3a+')'));for(const _0xc60d82 of _0x4d4636){if(!this[_0xdd135d(0xd9)](_0xc60d82))continue;const _0xcd2719=_0xc60d82['key']?.['id'],_0x2a9231=_0xc60d82[_0xdd135d(0x83)][_0xdd135d(0xc4)];if(_0x2a9231===_0xdd135d(0xe4)){await this[_0xdd135d(0x92)](_0xc60d82);continue;}if(this[_0xdd135d(0x99)][_0xdd135d(0xc1)](_0xcd2719)){logger[_0xdd135d(0x8b)](chalk[_0xdd135d(0xc5)](_0xdd135d(0xc3)+_0xcd2719+_0xdd135d(0xc6)));continue;}this[_0xdd135d(0x99)][_0xdd135d(0xaa)](_0xcd2719),logger[_0xdd135d(0x8b)](chalk['cyan'](_0xdd135d(0xa8)+_0xcd2719));try{await this['processNormalMessage'](_0xc60d82);}catch(_0x2254be){logger['error'](chalk['red'](_0xdd135d(0x8d)+_0xcd2719+':'),_0x2254be);}finally{this[_0xdd135d(0xa1)](_0xcd2719);}}}async[_0x585dcb(0xcc)](_0x4ad48b){const _0x1f3a25=_0x585dcb;logger[_0x1f3a25(0x8b)](chalk[_0x1f3a25(0x7e)](_0x1f3a25(0x97)));}async[_0x585dcb(0xdd)](_0x2b8edb){const _0xd370f6=_0x585dcb;logger[_0xd370f6(0x8b)](chalk[_0xd370f6(0x7e)](_0xd370f6(0xa4)));}async[_0x585dcb(0xbf)](_0xb6cf7c){const _0x2283b9=_0x585dcb,_0x30cd3f=Object[_0x2283b9(0xa5)](_0xb6cf7c['message'])[0x0],_0x222675=_0xb6cf7c[_0x2283b9(0x83)][_0x2283b9(0xc4)],_0x42872d=_0xb6cf7c['key'][_0x2283b9(0x88)]||_0x222675,_0x4b73aa=this[_0x2283b9(0x86)](_0xb6cf7c[_0x2283b9(0xbd)]);this['logMessageInfo'](_0x42872d,_0x4b73aa,_0x222675,_0x30cd3f),await kordCmdUpsert(this[_0x2283b9(0xde)],_0xb6cf7c),this[_0x2283b9(0xd0)](_0x2283b9(0x80),_0xb6cf7c);}['getMessageContent'](_0x1842ca){const _0x125774=_0x585dcb;if(!_0x1842ca)return _0x125774(0xdb);if(_0x1842ca['conversation'])return _0x1842ca[_0x125774(0x7b)];if(_0x1842ca[_0x125774(0xb2)])return _0x1842ca[_0x125774(0xb2)][_0x125774(0xe5)];if(_0x1842ca[_0x125774(0xaf)])return _0x125774(0xa0)+(_0x1842ca[_0x125774(0xaf)][_0x125774(0xce)]||'');if(_0x1842ca[_0x125774(0xa6)])return _0x125774(0xc8)+(_0x1842ca[_0x125774(0xa6)][_0x125774(0xce)]||'');if(_0x1842ca[_0x125774(0xad)])return _0x125774(0xd6);if(_0x1842ca['stickerMessage'])return'[Sticker]';if(_0x1842ca[_0x125774(0xa7)])return _0x125774(0xd2)+(_0x1842ca['documentMessage'][_0x125774(0xda)]||'');if(_0x1842ca[_0x125774(0x8f)])return'[Contact]';if(_0x1842ca[_0x125774(0x87)])return _0x125774(0xa2);return _0x125774(0xdb);}[_0x585dcb(0x96)](){setInterval(()=>{const _0x15836e=_0x492e;this[_0x15836e(0x7f)]();},0x36ee80);}[_0x585dcb(0x7f)](){const _0x15d442=_0x585dcb,_0x545cfe=Date[_0x15d442(0x84)]();for(const _0x4ba8ba of this['processedMessages']){_0x545cfe-parseInt(_0x4ba8ba['split']('_')[0x0])>0x36ee80&&this[_0x15d442(0x99)][_0x15d442(0xbb)](_0x4ba8ba);}logger[_0x15d442(0x8b)](chalk[_0x15d442(0x7e)](_0x15d442(0x9e)+this[_0x15d442(0x99)]['size']));}[_0x585dcb(0xa1)](_0x5319d1){setTimeout(()=>{const _0x42f497=_0x492e;this['processedMessages'][_0x42f497(0xbb)](_0x5319d1),logger[_0x42f497(0x8b)](chalk[_0x42f497(0x7e)](_0x42f497(0xc2)+_0x5319d1+_0x42f497(0xb8)));},0x493e0);}['logMessageInfo'](_0x510365,_0x54add8,_0x3875ca,_0x21361e){const _0x425531=_0x585dcb;logger[_0x425531(0xb9)](chalk[_0x425531(0xb5)](_0x425531(0x9b))),logger[_0x425531(0xb9)](chalk[_0x425531(0x7d)]('ðŸ‘¤\x20User\x20JID:\x20'+_0x510365)),logger[_0x425531(0xb9)](chalk[_0x425531(0x9a)](_0x425531(0x9f)+_0x54add8)),logger[_0x425531(0xb9)](chalk['yellow'](_0x425531(0xbc)+_0x3875ca)),logger['info'](chalk[_0x425531(0x7e)]('ðŸ·ï¸\x20Message\x20Type:\x20'+_0x21361e));}['isValidMessage'](_0x16b7ce){const _0x7e00fc=_0x585dcb;if(!_0x16b7ce||!_0x16b7ce[_0x7e00fc(0xbd)])return logger['debug'](chalk[_0x7e00fc(0x81)](_0x7e00fc(0xe2))),![];if(!_0x16b7ce[_0x7e00fc(0x83)]?.['id'])return logger['debug'](chalk[_0x7e00fc(0x81)]('âš ï¸\x20Skipping\x20message\x20with\x20no\x20ID')),![];return!![];}async[_0x585dcb(0x92)](_0x391690){const _0x5016fe=_0x585dcb,_0x1d4047=_0x391690[_0x5016fe(0x83)][_0x5016fe(0x88)]||_0x391690[_0x5016fe(0x83)][_0x5016fe(0xc4)],_0xd04a4c=this[_0x5016fe(0x86)](_0x391690['message']);logger[_0x5016fe(0xb9)](chalk['magenta']('ðŸ“Š\x20New\x20status\x20update\x20received:')),logger[_0x5016fe(0xb9)](chalk[_0x5016fe(0x9a)]('ðŸ‘¤\x20Sender\x20JID:\x20'+_0x1d4047)),logger['info'](chalk[_0x5016fe(0x81)](_0x5016fe(0xb3)+_0xd04a4c)),logger[_0x5016fe(0xb9)](chalk[_0x5016fe(0x90)](_0x5016fe(0x9d)+Object[_0x5016fe(0xa5)](_0x391690[_0x5016fe(0xbd)])[0x0]));try{await this[_0x5016fe(0xde)][_0x5016fe(0xd3)]([_0x391690['key']]),logger['info'](chalk['cyan'](_0x5016fe(0x78)));}catch(_0x15496b){logger[_0x5016fe(0xa3)](chalk[_0x5016fe(0x94)](_0x5016fe(0x79)),_0x15496b);}}}function initializeKordEvents(_0x2176e3){const _0x31ba00=_0x585dcb,_0x42cc68=new KordEventsManager(_0x2176e3);return _0x42cc68[_0x31ba00(0xc7)]()[_0x31ba00(0x89)](_0x137341=>{const _0x188c06=_0x31ba00;console[_0x188c06(0xa3)](chalk['red'](_0x188c06(0x9c)),_0x137341);}),_0x42cc68['on'](_0x31ba00(0xa3),({event:_0x309409,error:_0x5a4aaf,args:_0x234d70})=>{const _0x3f200e=_0x31ba00;logger[_0x3f200e(0xa3)](chalk[_0x3f200e(0x94)](_0x3f200e(0xe1)+_0x309409+':'),_0x5a4aaf),_0x42cc68[_0x3f200e(0xc9)]&&logger[_0x3f200e(0x8b)](chalk['gray'](_0x3f200e(0xcd)),JSON['stringify'](_0x234d70,null,0x2));}),_0x42cc68;}module['exports']={'KordEventsManager':KordEventsManager,'initializeKordEvents':initializeKordEvents};let file=require['resolve'](__filename);fss[_0x585dcb(0xb0)](file,()=>{const _0xa9212=_0x585dcb;fss[_0xa9212(0x8e)](file),console[_0xa9212(0xb7)](chalk['redBright'](_0xa9212(0xab)+__filename)),delete require['cache'][file],require(file);});