const a0_0x30b580=a0_0x4f30;(function(_0x5e480f,_0x58fc42){const _0x2a82a9=a0_0x4f30,_0x57a7c6=_0x5e480f();while(!![]){try{const _0x5278ee=parseInt(_0x2a82a9(0xe5))/0x1*(parseInt(_0x2a82a9(0x141))/0x2)+-parseInt(_0x2a82a9(0xe1))/0x3+parseInt(_0x2a82a9(0x142))/0x4*(-parseInt(_0x2a82a9(0x12a))/0x5)+-parseInt(_0x2a82a9(0x13f))/0x6+parseInt(_0x2a82a9(0xf5))/0x7*(parseInt(_0x2a82a9(0x16b))/0x8)+-parseInt(_0x2a82a9(0x12d))/0x9+parseInt(_0x2a82a9(0x164))/0xa;if(_0x5278ee===_0x58fc42)break;else _0x57a7c6['push'](_0x57a7c6['shift']());}catch(_0x3ed803){_0x57a7c6['push'](_0x57a7c6['shift']());}}}(a0_0x4196,0xed0a4));const {EventEmitter}=require(a0_0x30b580(0x12e)),fs=require('fs')[a0_0x30b580(0x112)],fss=require('fs'),logger=require(a0_0x30b580(0x119)),chalk=require(a0_0x30b580(0x110)),path=require(a0_0x30b580(0x13e)),{MediaUtils}=require(a0_0x30b580(0x102)),{kordCmdUpsert}=require('./kordCmd'),settings=require(a0_0x30b580(0x161)),{jidNormalizedUser}=require('@whiskeysockets/baileys'),fetch=require('node-fetch'),{createWriteStream}=require('fs'),{pipeline}=require(a0_0x30b580(0x118)),TEMP_DIR=path[a0_0x30b580(0x146)](process[a0_0x30b580(0x143)](),a0_0x30b580(0x106));class KordEventsManager extends EventEmitter{constructor(_0x1c38b2){const _0x24e2af=a0_0x30b580;super(),this[_0x24e2af(0x109)]=_0x1c38b2,this[_0x24e2af(0x16d)]=new Set(),this[_0x24e2af(0x138)]=new MediaUtils(_0x1c38b2),this[_0x24e2af(0x12c)]=process[_0x24e2af(0x135)][_0x24e2af(0x162)]==='true',this[_0x24e2af(0x108)]=global['settings']?.['OWNER_NUMBERS'],this[_0x24e2af(0x14d)]=this[_0x24e2af(0x108)]+_0x24e2af(0x15f);}async[a0_0x30b580(0x163)](){const _0x2c3a76=a0_0x30b580;try{await this[_0x2c3a76(0x138)][_0x2c3a76(0xf6)](),this[_0x2c3a76(0xe8)](),this[_0x2c3a76(0x13b)](),logger['info'](chalk[_0x2c3a76(0xf1)](_0x2c3a76(0xfd)));}catch(_0x1ee2c3){logger['error'](chalk[_0x2c3a76(0x169)](_0x2c3a76(0x160)),_0x1ee2c3);throw _0x1ee2c3;}}[a0_0x30b580(0xe8)](){const _0x5ab787=a0_0x30b580,_0x49356d=[_0x5ab787(0xe4),_0x5ab787(0xfb),'messages.delete'];_0x49356d[_0x5ab787(0x120)](_0x56e6a0=>{const _0x290431=_0x5ab787;this[_0x290431(0x109)]['ev']['on'](_0x56e6a0,(..._0x1f3d9a)=>this[_0x290431(0xec)](_0x56e6a0,..._0x1f3d9a));}),logger['info'](chalk['blue']('ðŸ‘‚\x20Baileys\x20event\x20listeners\x20initialized.'));}async[a0_0x30b580(0xec)](_0x554d3c,..._0x18cab0){const _0x338ff6=a0_0x30b580;try{logger[_0x338ff6(0x16f)](chalk[_0x338ff6(0x15b)](_0x338ff6(0x150)+_0x554d3c));this[_0x338ff6(0x12c)]&&logger[_0x338ff6(0x16f)](chalk[_0x338ff6(0xe7)](_0x338ff6(0x152)),JSON['stringify'](_0x18cab0,null,0x2));switch(_0x554d3c){case _0x338ff6(0xe4):await this[_0x338ff6(0xfe)](..._0x18cab0);break;case _0x338ff6(0xfb):await this[_0x338ff6(0xda)](..._0x18cab0);break;case _0x338ff6(0xeb):await this[_0x338ff6(0x145)](..._0x18cab0);break;default:logger[_0x338ff6(0x16f)](chalk[_0x338ff6(0x153)](_0x338ff6(0x123)+_0x554d3c));break;}}catch(_0x50d47a){logger[_0x338ff6(0x121)](chalk[_0x338ff6(0x169)](_0x338ff6(0xf8)+_0x554d3c+_0x338ff6(0x172)),_0x50d47a),this[_0x338ff6(0x140)](_0x338ff6(0x121),{'event':_0x554d3c,'error':_0x50d47a,'args':_0x18cab0});}}async[a0_0x30b580(0xfe)]({messages:_0xae7982,type:_0x30244c}){const _0x5d9320=a0_0x30b580;logger[_0x5d9320(0x16f)](chalk['cyan'](_0x5d9320(0x11d)+_0x30244c+')'));for(const _0x4063b3 of _0xae7982){if(!this['isValidMessage'](_0x4063b3))continue;const _0x263aa0=_0x4063b3[_0x5d9320(0x156)]?.['id'],_0x2617f7=_0x4063b3['key'][_0x5d9320(0xdb)];if(_0x2617f7===_0x5d9320(0xf0)){await this['handleStatus'](_0x4063b3);continue;}if(this[_0x5d9320(0x16d)][_0x5d9320(0xdd)](_0x263aa0)){logger[_0x5d9320(0x16f)](chalk[_0x5d9320(0xe7)](_0x5d9320(0xf7)+_0x263aa0+_0x5d9320(0xd6)));continue;}this[_0x5d9320(0x16d)]['add'](_0x263aa0),logger[_0x5d9320(0x16f)](chalk[_0x5d9320(0x15b)](_0x5d9320(0xea)+_0x263aa0));try{await this[_0x5d9320(0xe3)](_0x4063b3);}catch(_0x2f079d){logger[_0x5d9320(0x121)](chalk[_0x5d9320(0x169)]('âŒ\x20Error\x20processing\x20message\x20'+_0x263aa0+':'),_0x2f079d);}finally{this[_0x5d9320(0x13c)](_0x263aa0);}}}async[a0_0x30b580(0xda)](_0x32f605){const _0x1f177a=a0_0x30b580;logger[_0x1f177a(0x16f)](chalk['cyan'](_0x1f177a(0x15c)));}async['handleMessagesDelete'](_0x1f327e){const _0x3b6c8f=a0_0x30b580;logger[_0x3b6c8f(0x16f)](chalk[_0x3b6c8f(0x15b)](_0x3b6c8f(0x14b)));}async[a0_0x30b580(0xe3)](_0x21e5f8){const _0xe7e460=a0_0x30b580,_0x4a77dc=Object['keys'](_0x21e5f8['message'])[0x0],_0x2e58cc=_0x21e5f8[_0xe7e460(0x156)][_0xe7e460(0xdb)],_0x593771=this[_0xe7e460(0x10c)](_0x21e5f8[_0xe7e460(0x10e)]);let _0x2bd632;if(_0x21e5f8['key'][_0xe7e460(0x124)])_0x2bd632=this[_0xe7e460(0x109)][_0xe7e460(0x149)]['id']['split'](':')[0x0];else _0x21e5f8['key'][_0xe7e460(0x13a)]?_0x2bd632=_0x21e5f8[_0xe7e460(0x156)][_0xe7e460(0x13a)][_0xe7e460(0x165)]('@')[0x0]:_0x2bd632=_0x21e5f8[_0xe7e460(0x156)][_0xe7e460(0xdb)][_0xe7e460(0x165)]('@')[0x0];this[_0xe7e460(0x101)](_0x2bd632,_0x593771,_0x2e58cc,_0x4a77dc);const _0x34db2a=this[_0xe7e460(0x108)],_0x5f1891=_0x2bd632===_0x34db2a;if(_0x593771[_0xe7e460(0x16c)]('$')&&_0x5f1891){const {exec:_0xb8186c}=require(_0xe7e460(0x114));try{if(_0x593771[_0xe7e460(0x16c)](_0xe7e460(0x122))||_0x593771['trim']()['startsWith'](_0xe7e460(0x104))){const _0x4544de=_0x593771[_0xe7e460(0x11e)](0x1)[_0xe7e460(0x15e)]();_0xb8186c(_0x4544de,async(_0x44ba34,_0x221081,_0x48a377)=>{const _0x36a598=_0xe7e460;if(_0x44ba34){await this['sock'][_0x36a598(0xde)](_0x2e58cc,{'text':_0x36a598(0x10d)+_0x44ba34['message']});return;}if(_0x48a377){await this['sock']['sendMessage'](_0x2e58cc,{'text':_0x36a598(0x100)+_0x48a377});return;}await this[_0x36a598(0x109)][_0x36a598(0xde)](_0x2e58cc,{'text':_0x221081||_0x36a598(0x14f)});});return;}const _0xbe6bdc=_0x593771[_0xe7e460(0x11e)](0x1)['trim']();let _0x1a94c9=await eval(_0xbe6bdc);typeof _0x1a94c9!=='string'&&(_0x1a94c9=require(_0xe7e460(0x127))[_0xe7e460(0xd9)](_0x1a94c9,{'depth':0x2})),await this['sock']['sendMessage'](_0x2e58cc,{'text':''+_0x1a94c9});}catch(_0x8ce259){await this[_0xe7e460(0x109)][_0xe7e460(0xde)](_0x2e58cc,{'text':_0xe7e460(0x10d)+_0x8ce259['message']});}return;}const _0x5dee00=['save',_0xe7e460(0x105),_0xe7e460(0xd4),'send',_0xe7e460(0xe9)];_0x5dee00[_0xe7e460(0x10f)](_0x37b99d=>_0x593771['toLowerCase']()[_0xe7e460(0x14c)](_0x37b99d))&&await this[_0xe7e460(0x138)]['handlePotentialStatusDownload'](_0x21e5f8),global[_0xe7e460(0x137)]?.[_0xe7e460(0x14a)]&&this[_0xe7e460(0x138)][_0xe7e460(0x166)](_0x21e5f8)&&!this['mediaUtils'][_0xe7e460(0x107)]['has'](_0x21e5f8[_0xe7e460(0x156)]['id'])&&_0x2bd632!==_0x34db2a&&await this['mediaUtils'][_0xe7e460(0x11c)](_0x21e5f8),await kordCmdUpsert(this[_0xe7e460(0x109)],_0x21e5f8),this[_0xe7e460(0x140)](_0xe7e460(0x13d),_0x21e5f8);}[a0_0x30b580(0x10c)](_0x505623){const _0x531a85=a0_0x30b580;if(!_0x505623)return'[Unknown\x20Message\x20Type]';if(_0x505623[_0x531a85(0x173)])return _0x505623[_0x531a85(0x173)];if(_0x505623[_0x531a85(0x158)])return _0x505623['extendedTextMessage'][_0x531a85(0xd7)];if(_0x505623[_0x531a85(0xef)])return _0x531a85(0x170)+(_0x505623['imageMessage']['caption']||'');if(_0x505623[_0x531a85(0x111)])return _0x531a85(0x116)+(_0x505623[_0x531a85(0x111)][_0x531a85(0x16a)]||'');if(_0x505623['audioMessage'])return _0x531a85(0xf2);if(_0x505623[_0x531a85(0xdf)])return _0x531a85(0x144);if(_0x505623[_0x531a85(0x155)])return _0x531a85(0xd8)+(_0x505623[_0x531a85(0x155)][_0x531a85(0x11b)]||'');if(_0x505623[_0x531a85(0x139)])return'[Contact]';if(_0x505623[_0x531a85(0x113)])return _0x531a85(0xd5);return'[Unknown\x20Message\x20Type]';}[a0_0x30b580(0xf3)](_0x59b9ee){const _0x4a4652=a0_0x30b580;return _0x59b9ee&&_0x59b9ee[_0x4a4652(0x10e)]&&_0x59b9ee[_0x4a4652(0x156)]?.['id'];}async[a0_0x30b580(0x157)](_0x5089ef,_0x530f34){const _0x3a7074=a0_0x30b580,_0x51ee82=_0x5089ef['key']['remoteJid'],_0x24eac5=_0x3a7074(0xf4)+encodeURIComponent(_0x530f34);try{await fs[_0x3a7074(0x103)](TEMP_DIR,{'recursive':!![]});const _0x503c70=await fetch(_0x24eac5),_0x5959ab=await _0x503c70[_0x3a7074(0x15a)]();if(!_0x5959ab['success']||!_0x5959ab[_0x3a7074(0x148)]?.['video']){await this[_0x3a7074(0x109)][_0x3a7074(0xde)](_0x51ee82,{'text':_0x3a7074(0x154),'react':{'key':_0x5089ef[_0x3a7074(0x156)],'text':'âš ï¸'}});return;}const _0xe08f75=path[_0x3a7074(0x146)](TEMP_DIR,_0x3a7074(0x12f)+Date[_0x3a7074(0xfa)]()+_0x3a7074(0x16e)),_0x18a406=await fetch(_0x5959ab[_0x3a7074(0x148)][_0x3a7074(0xe0)]),_0x4d0bc3=createWriteStream(_0xe08f75);await pipeline(_0x18a406[_0x3a7074(0xf9)],_0x4d0bc3);const _0x4681fe='>\x20Â©\x20ÉªÉ´á´›á´‡ÊŸÊŸÉªÉ¢á´‡É´á´„á´‡\x20Ê™Ê\x20á´‹á´Ê€á´…\x20ÉªÉ´á´„Â³Â²Â¹â„¢';await this['sock'][_0x3a7074(0xde)](_0x51ee82,{'video':await fs['readFile'](_0xe08f75),'caption':_0x4681fe,'mimetype':_0x3a7074(0x15d)},{'quoted':_0x5089ef}),await fs[_0x3a7074(0x126)](_0xe08f75),logger[_0x3a7074(0x130)](chalk['green']('âœ…\x20Facebook\x20video\x20downloaded\x20and\x20sent\x20successfully'));}catch(_0x2e8430){logger['error'](chalk['red']('âŒ\x20Error\x20in\x20Facebook\x20video\x20download:'),_0x2e8430),await this['sock'][_0x3a7074(0xde)](_0x51ee82,{'text':_0x3a7074(0x133),'react':{'key':_0x5089ef['key'],'text':'âš ï¸'}});}}async[a0_0x30b580(0x171)](_0x5ca54a){const _0xefa64=a0_0x30b580,_0x4233b4=_0x5ca54a['key']['participant']||_0x5ca54a[_0xefa64(0x156)]['remoteJid'],_0x5196b2=this['getMessageContent'](_0x5ca54a[_0xefa64(0x10e)]);logger['info'](chalk['magenta']('||==========KORD-AI=========||:')),logger['info'](chalk[_0xefa64(0x11a)](_0xefa64(0x115))),logger[_0xefa64(0x130)](chalk[_0xefa64(0xf1)](_0xefa64(0xed)+_0x4233b4)),logger[_0xefa64(0x130)](chalk[_0xefa64(0x153)]('ðŸ’¬\x20Status\x20Content:\x20'+_0x5196b2)),logger[_0xefa64(0x130)](chalk['white']('ðŸ·ï¸\x20Status\x20Type:\x20'+Object[_0xefa64(0xff)](_0x5ca54a['message'])[0x0]));try{if(global[_0xefa64(0x137)][_0xefa64(0x129)]&&_0x5ca54a[_0xefa64(0x156)]){const _0xaab153=await jidNormalizedUser(this[_0xefa64(0x109)][_0xefa64(0x149)]['id']);await this['sock']['readMessages']([_0x5ca54a[_0xefa64(0x156)]]);}if(global['settings']['AUTO_LIKE_STATUS']){const _0x10a0e5=await jidNormalizedUser(this[_0xefa64(0x109)]['user']['id']),_0x226692=global[_0xefa64(0x137)][_0xefa64(0x10a)]||'âœ¨';_0x5ca54a['key'][_0xefa64(0xdb)]&&_0x5ca54a['key'][_0xefa64(0x13a)]&&await this[_0xefa64(0x109)]['sendMessage'](_0x5ca54a['key'][_0xefa64(0xdb)],{'react':{'key':_0x5ca54a[_0xefa64(0x156)],'text':_0x226692}},{'statusJidList':[_0x5ca54a[_0xefa64(0x156)][_0xefa64(0x13a)],_0x10a0e5]});}}catch(_0x23d3af){logger['error'](chalk['red']('âŒ\x20Error\x20processing\x20status\x20actions:'),_0x23d3af);}}[a0_0x30b580(0x101)](_0x1dc369,_0x1bd837,_0x219ec4,_0x13752e){const _0xd52163=a0_0x30b580;logger[_0xd52163(0x130)](chalk['blue'](_0xd52163(0xdc))),logger[_0xd52163(0x130)](chalk['magenta']('ðŸ“©\x20New\x20message\x20received:')),logger['info'](chalk[_0xd52163(0x131)](_0xd52163(0x167)+_0x1dc369)),logger[_0xd52163(0x130)](chalk[_0xd52163(0xf1)](_0xd52163(0x151)+_0x1bd837)),logger[_0xd52163(0x130)](chalk[_0xd52163(0x153)](_0xd52163(0x136)+_0x219ec4)),logger[_0xd52163(0x130)](chalk['cyan'](_0xd52163(0x117)+_0x13752e));}['startPeriodicCleanup'](){setInterval(()=>{const _0x3cb679=a0_0x4f30;this['cleanupProcessedMessages'](),this[_0x3cb679(0x138)][_0x3cb679(0x12b)](),this[_0x3cb679(0x138)]['clearProcessedViewOnceMessages']();},0x36ee80);}[a0_0x30b580(0x125)](){const _0x2bbcde=a0_0x30b580,_0x3167a2=Date[_0x2bbcde(0xfa)]();for(const _0x36be4a of this[_0x2bbcde(0x16d)]){_0x3167a2-parseInt(_0x36be4a[_0x2bbcde(0x165)]('_')[0x0])>0x36ee80&&this[_0x2bbcde(0x16d)][_0x2bbcde(0x159)](_0x36be4a);}logger['debug'](chalk[_0x2bbcde(0x15b)](_0x2bbcde(0xfc)+this['processedMessages'][_0x2bbcde(0x147)]));}[a0_0x30b580(0x13c)](_0x21130f){setTimeout(()=>{const _0x5b0223=a0_0x4f30;this[_0x5b0223(0x16d)]['delete'](_0x21130f),logger[_0x5b0223(0x16f)](chalk[_0x5b0223(0x15b)](_0x5b0223(0x11f)+_0x21130f+'\x20from\x20processed\x20messages'));},0x493e0);}}function initializeKordEvents(_0x1a97dd){const _0x3d5911=a0_0x30b580,_0x4db65f=new KordEventsManager(_0x1a97dd);return _0x4db65f['initialize']()[_0x3d5911(0x10b)](_0x9a1e9=>{const _0x14c1e7=_0x3d5911;console[_0x14c1e7(0x121)](chalk[_0x14c1e7(0x169)](_0x14c1e7(0x128)),_0x9a1e9);}),_0x4db65f['on'](_0x3d5911(0x121),({event:_0xe6614e,error:_0x3916ca,args:_0x1319a8})=>{const _0x1faab9=_0x3d5911;logger[_0x1faab9(0x121)](chalk[_0x1faab9(0x169)]('âŒ\x20Error\x20in\x20event\x20'+_0xe6614e+':'),_0x3916ca);}),_0x4db65f;}module[a0_0x30b580(0x14e)]={'KordEventsManager':KordEventsManager,'initializeKordEvents':initializeKordEvents};let file=require[a0_0x30b580(0x168)](__filename);function a0_0x4f30(_0x4a93f9,_0x52c67b){const _0x4196a0=a0_0x4196();return a0_0x4f30=function(_0x4f30c3,_0x375d13){_0x4f30c3=_0x4f30c3-0xd4;let _0x2610b2=_0x4196a0[_0x4f30c3];return _0x2610b2;},a0_0x4f30(_0x4a93f9,_0x52c67b);}function a0_0x4196(){const _0x4ec4cf=['includes','ownerJid','exports','Command\x20executed\x20successfully\x20but\x20produced\x20no\x20output.','ðŸ”„\x20Handling\x20event:\x20','ðŸ’¬\x20Message:\x20','ðŸ“Š\x20Event\x20args:','yellow','âš ï¸\x20Failed\x20.','documentMessage','key','handleFacebookVideoDownload','extendedTextMessage','delete','json','cyan','ðŸ”„\x20Handling\x20messages.update\x20event','video/mp4','trim','@s.whatsapp.net','âŒ\x20Error\x20initializing\x20KordEventsManager:','../../Config.js','DEBUG_MODE','initialize','40030820uxppmh','split','isViewOnceMessage','ðŸ‘¤\x20User\x20JID:\x20','resolve','red','caption','1896nRBcTl','startsWith','processedMessages','.mp4','debug','[Image]\x20','handleStatus','\x20event:','conversation','status','[Location]','\x20already\x20processed,\x20skipping.','text','[Document]\x20','inspect','handleMessagesUpdate','remoteJid','||==========KORD-AI=========||:','has','sendMessage','stickerMessage','video','4631397LVziHX','cache','processNormalMessage','messages.upsert','16cCDOsT','Update\x20','gray','initializeEventListeners','take','ðŸ”„\x20Processing\x20message\x20','messages.delete','handleEvent','ðŸ‘¤\x20Sender\x20JID:\x20','watchFile','imageMessage','status@broadcast','green','[Audio]','isValidMessage','https://api.kordai.us.kg/facebook?url=','4060LuCjwB','setup','ðŸ”\x20Message\x20','âŒ\x20Error\x20handling\x20','body','now','messages.update','ðŸ§¹\x20Cleaned\x20up\x20processed\x20messages.\x20Current\x20count:\x20','âœ…\x20KordEventsManager\x20initialized\x20successfully.','handleMessagesUpsert','keys','Stderr:\x20','logMessageInfo','./mediaUtils','mkdir','$cat','download','temp','processedViewOnceMessages','ownerNumbers','sock','AUTO_LIKE_EMOJI','catch','getMessageContent','Error:\x20','message','some','chalk','videoMessage','promises','locationMessage','child_process','ðŸ“Š\x20New\x20status\x20update\x20received:','[Video]\x20','ðŸ·ï¸\x20Message\x20Type:\x20','stream/promises','./kordlogger','magenta','fileName','handleViewOnceMessage','ðŸ”„\x20Handling\x20messages.upsert\x20(','slice','ðŸ—‘ï¸\x20Removed\x20','forEach','error','$npm','âš ï¸\x20Unhandled\x20event:\x20','fromMe','cleanupProcessedMessages','unlink','util','âŒ\x20Failed\x20to\x20initialize\x20KordEventsManager:','AUTO_READ_STATUS','43735bOqcmu','clearProcessedStatusDownloads','debugMode','2480976UGmoTK','events','fb_','info','blue','log','âš ï¸\x20An\x20error\x20occurred\x20while\x20downloading\x20the\x20Facebook\x20video.','unwatchFile','env','ðŸ—¨ï¸\x20Chat\x20JID:\x20','settings','mediaUtils','contactMessage','participant','startPeriodicCleanup','scheduleMessageCleanup','messageReceived','path','5224752EBlAEk','emit','151100BjSvkE','772MEtupJ','cwd','[Sticker]','handleMessagesDelete','join','size','data','user','ANTI_VIEWONCE','ðŸ”„\x20Handling\x20messages.delete\x20event'];a0_0x4196=function(){return _0x4ec4cf;};return a0_0x4196();}fss[a0_0x30b580(0xee)](file,()=>{const _0x2df136=a0_0x30b580;fss[_0x2df136(0x134)](file),console[_0x2df136(0x132)](chalk['redBright'](_0x2df136(0xe6)+__filename)),delete require[_0x2df136(0xe2)][file],require(file);});